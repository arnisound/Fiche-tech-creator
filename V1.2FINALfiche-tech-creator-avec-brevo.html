<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fiche Tech Creator - G√©n√©rateur de Fiches Techniques Audio</title>

<!--
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                                                                              ‚ïë
‚ïë                        FICHE TECH CREATOR v1.2 Beta                          ‚ïë
‚ïë                                                                              ‚ïë
‚ïë  Copyright ¬© 2025 Th√©o Arnisound                                            ‚ïë
‚ïë  Tous droits r√©serv√©s                                                       ‚ïë
‚ïë                                                                              ‚ïë
‚ïë  Ce logiciel et son code source sont prot√©g√©s par le droit d'auteur.       ‚ïë
‚ïë                                                                              ‚ïë
‚ïë  USAGE AUTORIS√â :                                                           ‚ïë
‚ïë  ‚úì Usage personnel et non-commercial uniquement                            ‚ïë
‚ïë                                                                              ‚ïë
‚ïë  STRICTEMENT INTERDIT sans autorisation √©crite :                            ‚ïë
‚ïë  ‚úó Utilisation commerciale                                                  ‚ïë
‚ïë  ‚úó Modification du code                                                     ‚ïë
‚ïë  ‚úó Redistribution                                                           ‚ïë
‚ïë  ‚úó Cr√©ation d'≈ìuvres d√©riv√©es                                              ‚ïë
‚ïë                                                                              ‚ïë
‚ïë  Pour toute demande d'utilisation commerciale ou licence :                  ‚ïë
‚ïë  Email : arnisound.tools@gmail.com                                          ‚ïë
‚ïë                                                                              ‚ïë
‚ïë  Voir le fichier LICENSE.txt pour les conditions compl√®tes d'utilisation.   ‚ïë
‚ïë                                                                              ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #000000;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(180deg, #000000 0%, #ffffff 300%);
            color: white;
            padding: 45px 45px;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .header svg {
            max-width: 100%;
            height: auto;
        }
        
        .progress-bar {
            background: #f0f0f0;
            height: 8px;
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #c19a3e 0%, #ffd700 100%);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .content {
            padding: 40px 30px;
        }
        
        .question-container {
            display: none;
        }
        
        .question-container.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .question-title {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .question-subtitle {
            color: #666;
            margin-bottom: 25px;
            font-size: 0.95em;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
        }
        
        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="number"],
        select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1em;
            transition: all 0.3s ease;
        }
        
        input:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .instrument-config {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .instrument-card {
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: #f8f9ff;
        }
        
        .instrument-card.selected {
            border-color: #667eea;
            background: #e8ecff;
        }
        
        .instrument-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .instrument-header input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            cursor: pointer;
        }
        
        .instrument-header label {
            margin: 0;
            cursor: pointer;
            font-size: 1.1em;
        }
        
        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        .quantity-selector input {
            width: 60px;
            text-align: center;
            padding: 8px;
        }
        
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 15px;
        }
        
        .radio-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .radio-item:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }
        
        .radio-item input[type="radio"] {
            margin-right: 12px;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .monitoring-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .monitoring-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
        }

        .monitoring-card h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1em;
        }

        .monitoring-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .monitoring-option {
            display: flex;
            align-items: center;
            padding: 8px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .monitoring-option:hover {
            background: #f8f9ff;
            border-color: #667eea;
        }

        .monitoring-option input[type="radio"] {
            margin-right: 8px;
        }

        .side-option {
            margin-top: 20px;
            padding: 15px;
            background: #fff3cd;
            border-radius: 10px;
            border: 2px solid #ffc107;
        }

        .side-option label {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .side-option input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 10px;
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        button {
            flex: 1;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #ffa500 0%, #ffd700 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 165, 0, 0.4);
        }
        
        .btn-secondary {
            background: #f0f0f0;
            color: #666;
        }
        
        .btn-secondary:hover {
            background: #e0e0e0;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }
        
        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(17, 153, 142, 0.4);
        }
        
        .result-container {
            display: none;
        }
        
        .result-container.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        .result-card {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .result-card h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .editable-patch-table {
            width: 100%;
            margin-top: 15px;
        }
        
        .patch-row {
            display: grid;
            grid-template-columns: 50px 1fr 1fr 150px 60px 35px;
            gap: 10px;
            padding: 10px;
            background: white;
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: move;
            border: 2px solid #e0e0e0;
            transition: all 0.2s ease;
        }
        
        .patch-row:hover {
            border-color: #667eea;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .patch-row.dragging {
            opacity: 0.5;
        }
        
        .patch-row input,
        .patch-row select {
            padding: 8px;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            font-size: 0.95em;
        }
        
        .patch-row input:focus,
        .patch-row select:focus {
            border-color: #667eea;
            outline: none;
        }
        
        .channel-number {
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #667eea;
            font-size: 1.1em;
        }
        
        .delete-btn {
            background: #ff4757;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            padding: 5px 8px;
            font-size: 0.9em;
            transition: all 0.2s ease;
        }
        
        .delete-btn:hover {
            background: #ff3838;
            transform: scale(1.05);
        }

        .color-select {
            width: 100%;
            padding: 8px;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            font-size: 0.9em;
            cursor: pointer;
            height: 36px;
        }

        .color-select:focus {
            border-color: #667eea;
            outline: none;
        }

        .color-select option {
            padding: 6px;
            font-size: 1.2em;
        }
        
        .add-channel-btn {
            width: 100%;
            padding: 12px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            margin-top: 10px;
            transition: all 0.2s ease;
        }
        
        .add-channel-btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }
        
        .patch-header {
            display: grid;
            grid-template-columns: 50px 1fr 1fr 150px 60px 35px;
            gap: 10px;
            padding: 10px;
            background: #667eea;
            color: white;
            border-radius: 8px;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .returns-table {
            width: 100%;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            margin-top: 15px;
        }

        .returns-table-header {
            display: grid;
            grid-template-columns: 50px 1fr 200px 60px;
            gap: 10px;
            padding: 12px;
            background: #11998e;
            color: white;
            font-weight: 600;
        }

        .returns-row {
            display: grid;
            grid-template-columns: 50px 1fr 200px 60px;
            gap: 10px;
            padding: 12px;
            border-bottom: 1px solid #e0e0e0;
        }

        .returns-row:last-child {
            border-bottom: none;
        }

        .returns-row:hover {
            background: #f8f9ff;
        }
        
        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .info-row:last-child {
            border-bottom: none;
        }
        
        .info-label {
            font-weight: 600;
            color: #555;
        }
        
        .info-value {
            color: #333;
        }
        
        .success-message {
            background: #28a745;
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .success-message h2 {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .help-text {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 12px;
            margin-top: 15px;
            border-radius: 5px;
            font-size: 0.9em;
            color: #856404;
        }
        
        @media (max-width: 768px) {
            .header svg {
                width: 100%;
                max-width: 700px;
                height: auto;
            }
            
            .instrument-config {
                grid-template-columns: 1fr;
            }

            .monitoring-grid {
                grid-template-columns: 1fr;
            }
            
            .buttons {
                flex-direction: column;
            }
            
            .patch-row {
                grid-template-columns: 40px 1fr 40px;
                gap: 8px;
            }
            
            .patch-row input:nth-child(3),
            .patch-row select:nth-child(4) {
                grid-column: 1 / -1;
            }
            
            .patch-header {
                display: none;
            }

            .returns-table-header,
            .returns-row {
                grid-template-columns: 40px 1fr;
                font-size: 0.9em;
            }

            .returns-row div:nth-child(3),
            .returns-row div:nth-child(4) {
                grid-column: 1 / -1;
                margin-top: 5px;
                padding-top: 5px;
                border-top: 1px solid #e0e0e0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div style="width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center;">
                <svg width="1000" height="200" viewBox="0 0 1600 320" xmlns="http://www.w3.org/2000/svg" style="display: block;">
                    <!-- Cercle blanc (beaucoup plus gros et centr√©) -->
                    <circle cx="400" cy="160" r="140" fill="none" stroke="#FFFFFF" stroke-width="12"/>
                    
                    <!-- Texte FICHE TECH -->
                    <text x="400" y="140" 
                          fill="#FFFFFF" 
                          font-family="Arial, Helvetica, sans-serif" 
                          font-weight="bold" 
                          font-size="36" 
                          text-anchor="middle"
                          letter-spacing="3">FICHE TECH</text>
                    
                    <!-- Texte CREATOR -->
                    <text x="400" y="185" 
                          fill="#FFFFFF" 
                          font-family="Arial, Helvetica, sans-serif" 
                          font-weight="bold" 
                          font-size="36" 
                          text-anchor="middle"
                          letter-spacing="3">CREATOR</text>
                    
                    <!-- Forme d'onde dor√©e (r√©duite de moiti√©) -->
                    <path d="M 330 250 
                             C 338 250, 343 247, 348 243
                             C 353 239, 358 247, 363 250
                             C 368 253, 373 254, 378 253
                             C 383 252, 388 243, 396 237
                             C 404 231, 409 237, 414 243
                             C 419 249, 424 253, 429 254
                             C 434 255, 439 254, 444 253
                             C 449 252, 454 250, 459 250.5
                             C 464 251, 466.5 251.5, 469 252"
                          fill="none" 
                          stroke="#C19A3E" 
                          stroke-width="4" 
                          stroke-linecap="round"
                          stroke-linejoin="round"/>
                    
                    <!-- Groupe texte ARNISOUND TOOLS (centr√© sur la droite) -->
                    <g transform="translate(1050, 0)">
                        <!-- Texte ARNISOUND -->
                        <text x="0" y="100" 
                              fill="#FFFFFF" 
                              font-family="Arial, Helvetica, sans-serif" 
                              font-weight="bold" 
                              font-size="38" 
                              text-anchor="middle"
                              letter-spacing="2">ARNISOUND</text>
                        
                        <!-- Texte TOOLS -->
                        <text x="0" y="145" 
                              fill="#FFFFFF" 
                              font-family="Arial, Helvetica, sans-serif" 
                              font-weight="bold" 
                              font-size="38" 
                              text-anchor="middle"
                              letter-spacing="3">TOOLS</text>
                        
                        <!-- Texte LIVE & AV -->
                        <text x="0" y="190" 
                              fill="#FFFFFF" 
                              font-family="Arial, Helvetica, sans-serif" 
                              font-weight="bold" 
                              font-size="38" 
                              text-anchor="middle"
                              letter-spacing="3">LIVE &amp; AV</text>
                        
                        <!-- Texte APP -->
                        <text x="0" y="235" 
                              fill="#FFFFFF" 
                              font-family="Arial, Helvetica, sans-serif" 
                              font-weight="bold" 
                              font-size="38" 
                              text-anchor="middle"
                              letter-spacing="3">APP</text>
                    </g>
                </svg>
                <p style="color: white; font-size: 1.1em; margin-top: 15px; margin-bottom: 0; opacity: 0.95; text-align: center;">G√©n√©rateur de fiches techniques professionnelles</p>
            </div>
        </div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
        </div>
        
        <div class="content">
            <!-- Question 0: Page d'accueil avec formulaire Brevo -->
            <div class="question-container active" data-question="0">
                <div class="question-title">üéµ Bienvenue dans Fiche Tech Creator</div>
                <div class="question-subtitle">Cr√©ez votre fiche technique professionnelle en quelques minutes</div>
                
                <!-- Zone pour le formulaire Brevo -->
                <div style="background: #f8f9ff; border: 1px dashed #667eea; border-radius: 15px; padding: 15px; margin: 15px 0; text-align: center;">
                   <!-- Begin Brevo Form -->
<!-- START - We recommend to place the below code in head tag of your website html  -->
<style>
  @font-face {
    font-display: block;
    font-family: Roboto;
    src: url(https://assets.brevo.com/font/Roboto/Latin/normal/normal/7529907e9eaf8ebb5220c5f9850e3811.woff2) format("woff2"), url(https://assets.brevo.com/font/Roboto/Latin/normal/normal/25c678feafdc175a70922a116c9be3e7.woff) format("woff")
  }

  @font-face {
    font-display: fallback;
    font-family: Roboto;
    font-weight: 600;
    src: url(https://assets.brevo.com/font/Roboto/Latin/medium/normal/6e9caeeafb1f3491be3e32744bc30440.woff2) format("woff2"), url(https://assets.brevo.com/font/Roboto/Latin/medium/normal/71501f0d8d5aa95960f6475d5487d4c2.woff) format("woff")
  }

  @font-face {
    font-display: fallback;
    font-family: Roboto;
    font-weight: 700;
    src: url(https://assets.brevo.com/font/Roboto/Latin/bold/normal/3ef7cf158f310cf752d5ad08cd0e7e60.woff2) format("woff2"), url(https://assets.brevo.com/font/Roboto/Latin/bold/normal/ece3a1d82f18b60bcce0211725c476aa.woff) format("woff")
  }

  #sib-container input:-ms-input-placeholder {
    text-align: left;
    font-family: Helvetica, sans-serif;
    color: #c0ccda;
  }

  #sib-container input::placeholder {
    text-align: left;
    font-family: Helvetica, sans-serif;
    color: #c0ccda;
  }

  #sib-container textarea::placeholder {
    text-align: left;
    font-family: Helvetica, sans-serif;
    color: #c0ccda;
  }

  #sib-container a {
    text-decoration: underline;
    color: #2BB2FC;
  }
</style>
<link rel="stylesheet" href="https://sibforms.com/forms/end-form/build/sib-styles.css">
<!--  END - We recommend to place the above code in head tag of your website html -->

<!-- START - We recommend to place the below code where you want the form in your website html  -->
<div class="sib-form" style="text-align: center;
         background-color: transparent;                                 ">
  <div id="sib-form-container" class="sib-form-container">
    <div id="error-message" class="sib-form-message-panel" style="font-size:16px; text-align:left; font-family:Helvetica, sans-serif; color:#661d1d; background-color:#ffeded; border-radius:3px; border-color:#ff4949;max-width:540px;">
      <div class="sib-form-message-panel__text sib-form-message-panel__text--center">
        <svg viewBox="0 0 512 512" class="sib-icon sib-notification__icon">
          <path d="M256 40c118.621 0 216 96.075 216 216 0 119.291-96.61 216-216 216-119.244 0-216-96.562-216-216 0-119.203 96.602-216 216-216m0-32C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm-11.49 120h22.979c6.823 0 12.274 5.682 11.99 12.5l-7 168c-.268 6.428-5.556 11.5-11.99 11.5h-8.979c-6.433 0-11.722-5.073-11.99-11.5l-7-168c-.283-6.818 5.167-12.5 11.99-12.5zM256 340c-15.464 0-28 12.536-28 28s12.536 28 28 28 28-12.536 28-28-12.536-28-28-28z" />
        </svg>
        <span class="sib-form-message-panel__inner-text">
                          Nous n&#039;avons pas pu confirmer votre inscription.
                      </span>
      </div>
    </div>
    <div></div>
    <div id="success-message" class="sib-form-message-panel" style="font-size:16px; text-align:left; font-family:Helvetica, sans-serif; color:#085229; background-color:#e7faf0; border-radius:3px; border-color:#13ce66;max-width:540px;">
      <div class="sib-form-message-panel__text sib-form-message-panel__text--center">
        <svg viewBox="0 0 512 512" class="sib-icon sib-notification__icon">
          <path d="M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 464c-118.664 0-216-96.055-216-216 0-118.663 96.055-216 216-216 118.664 0 216 96.055 216 216 0 118.663-96.055 216-216 216zm141.63-274.961L217.15 376.071c-4.705 4.667-12.303 4.637-16.97-.068l-85.878-86.572c-4.667-4.705-4.637-12.303.068-16.97l8.52-8.451c4.705-4.667 12.303-4.637 16.97.068l68.976 69.533 163.441-162.13c4.705-4.667 12.303-4.637 16.97.068l8.451 8.52c4.668 4.705 4.637 12.303-.068 16.97z" />
        </svg>
        <span class="sib-form-message-panel__inner-text">
                          Votre inscription est confirm√©e.
                      </span>
      </div>
    </div>
    <div></div>
    <div id="sib-container" class="sib-container--large sib-container--vertical" style="text-align:center; background-color:rgba(255,255,255,1); max-width:540px; border-radius:3px; border-width:1px; border-color:#C0CCD9; border-style:solid; direction:ltr">
      <form id="sib-form" method="POST" action="https://d48bdecf.sibforms.com/serve/MUIFAGXu44PoMNnzpFiO_VWwfuByyVtnAHETQLmB-98Sp7aShLLHyojwAyT1M81hDMSJONtlVaj-TYMKX5PUQ6AzzR45jRNthzqAeOb8SG9SOskjaIuBt4uzfwONi3ihvGYglVIuBIkJEfU_W9ZIiiG_L25z-9hCpiC4Jvr3995sXyMoHIXeJRcHcVGzwpjaka1KoD1a7NMFK7ODRg==" data-type="subscription">
        <div style="padding: 8px 0;">
          <div class="sib-form-block" style="font-size:30px; text-align:left; font-weight:700; font-family:Helvetica, sans-serif; color:#3C4858; background-color:transparent; text-align:left">
            <p><strong>üéõÔ∏è </strong>Acc√®s beta</p>
          </div>
        </div>
        <div style="padding: 8px 0;">
          <div class="sib-form-block" style="font-size:15px; text-align:left; font-family:Helvetica, sans-serif; color:#3C4858; background-color:transparent; text-align:left">
            <div class="sib-text-form-block">
              <p><strong>Rejoins Arnisound Tools</strong><br>
                Re√ßois les news, acc√®s beta et outils en avant-premi√®re.</p>
            </div>
          </div>
        </div>
        <div style="padding: 8px 0;">
          <div class="sib-input sib-form-block">
            <div class="form__entry entry_block">
              <div class="form__label-row ">
                <label class="entry__label" style="font-weight: 700; text-align:left; font-size:16px; text-align:left; font-weight:700; font-family:Helvetica, sans-serif; color:#3c4858;" for="EMAIL" data-required="*">Renseigner votre adresse email pour acc√©der aux outils</label>

                <div class="entry__field">
                  <input class="input " type="text" id="EMAIL" name="EMAIL" autocomplete="off" placeholder="EMAIL" data-required="true" required />
                </div>
              </div>

              <label class="entry__error entry__error--primary" style="font-size:16px; text-align:left; font-family:Helvetica, sans-serif; color:#661d1d; background-color:#ffeded; border-radius:3px; border-color:#ff4949;">
              </label>
              <label class="entry__specification" style="font-size:12px; text-align:left; font-family:Helvetica, sans-serif; color:#8390A4; text-align:left">
                Pas de spam. Juste du son et des outils pour am√©lior√© ton workflow üéö
              </label>
            </div>
          </div>
        </div>
        <div style="padding: 8px 0;">
          <div class="sib-form-block" style="text-align: left">
            <button class="sib-form-block__button sib-form-block__button-with-loader" style="font-size:16px; text-align:left; font-weight:700; font-family:Helvetica, sans-serif; color:#FFFFFF; background-color:#c09921; border-radius:3px; border-width:0px;" form="sib-form" type="submit">
              <svg class="icon clickable__icon progress-indicator__icon sib-hide-loader-icon" viewBox="0 0 512 512" style="">
                <path d="M460.116 373.846l-20.823-12.022c-5.541-3.199-7.54-10.159-4.663-15.874 30.137-59.886 28.343-131.652-5.386-189.946-33.641-58.394-94.896-95.833-161.827-99.676C261.028 55.961 256 50.751 256 44.352V20.309c0-6.904 5.808-12.337 12.703-11.982 83.556 4.306 160.163 50.864 202.11 123.677 42.063 72.696 44.079 162.316 6.031 236.832-3.14 6.148-10.75 8.461-16.728 5.01z" />
              </svg>
              Acc√©der aux outils
            </button>
          </div>
        </div>

        <input type="text" name="email_address_check" value="" class="input--hidden">
        <input type="hidden" name="locale" value="fr">
      </form>
    </div>
  </div>
</div>
<!-- END - We recommend to place the above code where you want the form in your website html  -->

<!-- START - We recommend to place the below code in footer or bottom of your website html  -->
<script>
  window.REQUIRED_CODE_ERROR_MESSAGE = 'Veuillez choisir un code pays';
  window.LOCALE = 'fr';
  window.EMAIL_INVALID_MESSAGE = window.SMS_INVALID_MESSAGE = "Les informations que vous avez fournies ne sont pas valides. Veuillez v√©rifier le format du champ et r√©essayer.";

  window.REQUIRED_ERROR_MESSAGE = "Vous devez renseigner ce champ. ";

  window.GENERIC_INVALID_MESSAGE = "Les informations que vous avez fournies ne sont pas valides. Veuillez v√©rifier le format du champ et r√©essayer.";




  window.translation = {
    common: {
      selectedList: '{quantity} liste s√©lectionn√©e',
      selectedLists: '{quantity} listes s√©lectionn√©es',
      selectedOption: '{quantity} s√©lectionn√©',
      selectedOptions: '{quantity} s√©lectionn√©s',
    }
  };

  var AUTOHIDE = Boolean(1);
</script>

<script defer src="https://sibforms.com/forms/end-form/build/main.js"></script>


<!-- END - We recommend to place the above code in footer or bottom of your website html  -->
<!-- End Brevo Form -->
                  
                    
                    <!-- FIN ZONE BREVO -->
                </div>
                
                <div class="buttons" style="justify-content: center; margin-top: 40px;">
                    <button id="btnDemarrer" class="btn-primary" onclick="demarrerQuestionnaire()" style="font-size: 1.2em; padding: 15px 50px; display: none;">
                        üöÄ D√©marrer
                    </button>
                </div>
            </div>

            <!-- Question 1: Nom du groupe -->
            <div class="question-container" data-question="1">
                <div class="question-title">Nom du groupe ou spectacle</div>
                <div class="question-subtitle">Comment s'appelle votre groupe ou votre spectacle ?</div>
                <div class="input-group">
                    <input type="text" id="groupName" placeholder="Ex: The Jazz Band" required>
                </div>
                <div class="buttons">
                    <button class="btn-primary" onclick="nextQuestion(1)">Suivant ‚Üí</button>
                </div>
            </div>
            
            <!-- Question 2: Contact technique -->
            <div class="question-container" data-question="2">
                <div class="question-title">Contact technique</div>
                <div class="question-subtitle">Qui sera le responsable technique du groupe ?</div>
                <div class="input-group">
                    <label>Nom complet</label>
                    <input type="text" id="contactName" placeholder="Ex: Jean Dupont">
                </div>
                <div class="input-group">
                    <label>Email</label>
                    <input type="email" id="contactEmail" placeholder="ex: jean.dupont@email.com">
                </div>
                <div class="input-group">
                    <label>T√©l√©phone</label>
                    <input type="tel" id="contactPhone" placeholder="Ex: 06 12 34 56 78">
                </div>
                <div class="buttons">
                    <button class="btn-secondary" onclick="previousQuestion(2)">‚Üê Retour</button>
                    <button class="btn-primary" onclick="nextQuestion(2)">Suivant ‚Üí</button>
                </div>
            </div>
            
            <!-- Question 3: Style musical -->
            <div class="question-container" data-question="3">
                <div class="question-title">Style musical</div>
                <div class="question-subtitle">Quel est votre style de musique principal ?</div>
                <div class="radio-group">
                    <label class="radio-item">
                        <input type="radio" name="style" value="Rock">
                        <span>üé∏ Rock</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="style" value="Pop">
                        <span>üé§ Pop</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="style" value="Jazz">
                        <span>üé∫ Jazz</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="style" value="Folk">
                        <span>üéª Folk</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="style" value="Soul">
                        <span>üé§ Soul/Funk</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="style" value="Metal">
                        <span>ü§ò M√©tal</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="style" value="World">
                        <span>üåç World Music</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="style" value="Electro">
                        <span>üéπ √âlectro</span>
                    </label>
                </div>
                <div class="buttons">
                    <button class="btn-secondary" onclick="previousQuestion(3)">‚Üê Retour</button>
                    <button class="btn-primary" onclick="nextQuestion(3)">Suivant ‚Üí</button>
                </div>
            </div>
            
            <!-- Question 4: Nombre de musiciens -->
            <div class="question-container" data-question="4">
                <div class="question-title">Nombre de musiciens</div>
                <div class="question-subtitle">Combien de musiciens sur sc√®ne ?</div>
                <div class="input-group">
                    <input type="number" id="numMusicians" min="1" max="20" value="4" placeholder="Ex: 4">
                </div>
                <div class="buttons">
                    <button class="btn-secondary" onclick="previousQuestion(4)">‚Üê Retour</button>
                    <button class="btn-primary" onclick="nextQuestion(4)">Suivant ‚Üí</button>
                </div>
            </div>
            
            <!-- Question 5: Configuration instruments d√©taill√©e -->
            <div class="question-container" data-question="5">
                <div class="question-title">Configuration des instruments</div>
                <div class="question-subtitle">S√©lectionnez les instruments et indiquez les quantit√©s</div>
                
                <div class="instrument-config">
                    <!-- Batterie -->
                    <div class="instrument-card" id="card-drums">
                        <div class="instrument-header">
                            <input type="checkbox" id="has-drums" onchange="toggleInstrument('drums')">
                            <label for="has-drums">ü•Å Batterie</label>
                        </div>
                        <div id="config-drums" style="display: none;">
                            <label style="display: block; margin-bottom: 5px; font-weight: 500;">Technique de sonorisation :</label>
                            <select id="drums-config" style="width: 100%; margin-top: 5px; padding: 8px;" onchange="toggleDrumsOptions()">
                                <option value="mono">Mono (2 micros) - Kick + Overhead</option>
                                <option value="jazz">Jazz (4 micros) - Kick + Snare + OH L/R</option>
                                <option value="standard" selected>Standard avec toms</option>
                                <option value="electronic">Batterie √©lectronique</option>
                            </select>
                            
                            <!-- S√©lecteur de nombre de toms (visible uniquement pour Standard) -->
                            <div id="drums-toms-selector" style="margin-top: 10px; display: block;">
                                <label style="display: block; margin-bottom: 5px; font-weight: 500;">Nombre de toms :</label>
                                <select id="drums-num-toms" style="width: 100%; padding: 8px;">
                                    <option value="0">0 tom (seulement floor tom)</option>
                                    <option value="1" selected>1 tom + floor tom</option>
                                    <option value="2">2 toms + floor tom</option>
                                    <option value="3">3 toms + floor tom</option>
                                    <option value="4">4 toms + floor tom</option>
                                    <option value="5">5 toms + floor tom</option>
                                    <option value="6">6 toms + floor tom</option>
                                </select>
                            </div>
                            
                            <!-- Options suppl√©mentaires (non visible pour √©lectronique) -->
                            <div id="drums-options" style="margin-top: 15px;">
                                <label style="display: flex; align-items: center; margin-bottom: 8px; cursor: pointer;">
                                    <input type="checkbox" id="drums-hihat" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <span>Charleston / Hi-Hat</span>
                                </label>
                                <label style="display: flex; align-items: center; margin-bottom: 8px; cursor: pointer;">
                                    <input type="checkbox" id="drums-kickin" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <span>Kick In (micro int√©rieur)</span>
                                </label>
                                <label style="display: flex; align-items: center; margin-bottom: 8px; cursor: pointer;">
                                    <input type="checkbox" id="drums-snarebottom" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <span>Snare Bottom (caisse claire dessous)</span>
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" id="drums-ride" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <span>Ride (1 overhead suppl√©mentaire)</span>
                                </label>
                            </div>
                        </div>
                        
                        <script>
                            function toggleDrumsOptions() {
                                const config = document.getElementById('drums-config').value;
                                const tomsSelector = document.getElementById('drums-toms-selector');
                                const options = document.getElementById('drums-options');
                                
                                if (config === 'standard') {
                                    tomsSelector.style.display = 'block';
                                    options.style.display = 'block';
                                } else if (config === 'electronic') {
                                    tomsSelector.style.display = 'none';
                                    options.style.display = 'none';
                                } else {
                                    tomsSelector.style.display = 'none';
                                    options.style.display = 'block';
                                }
                            }
                        </script>
                    </div>
                    
                    <!-- Basse -->
                    <div class="instrument-card" id="card-bass">
                        <div class="instrument-header">
                            <input type="checkbox" id="has-bass" onchange="toggleInstrument('bass')">
                            <label for="has-bass">üé∏ Basse</label>
                        </div>
                        <div id="config-bass" style="display: none;">
                            <select id="bass-type" style="width: 100%; margin-top: 10px;" onchange="toggleBassOptions()">
                                <option value="electric">√âlectrique</option>
                                <option value="upright">Contrebasse</option>
                            </select>
                            <div id="electric-options" style="display: block; margin-top: 10px;">
                                <label style="font-size: 0.9em; color: #666; margin-bottom: 5px; display: block;">Sonorisation :</label>
                                <select id="electric-method" style="width: 100%; padding: 6px;">
                                    <option value="di">DI uniquement</option>
                                    <option value="amp">Micro ampli</option>
                                    <option value="mixed">Mixte (DI + Micro ampli)</option>
                                </select>
                            </div>
                            <div id="upright-options" style="display: none; margin-top: 10px;">
                                <label style="font-size: 0.9em; color: #666; margin-bottom: 5px; display: block;">Sonorisation :</label>
                                <select id="upright-method" style="width: 100%; padding: 6px;">
                                    <option value="mic">Micro</option>
                                    <option value="di">DI</option>
                                    <option value="mixed">Mixte (DI + Micro)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <script>
                        function toggleBassOptions() {
                            const bassType = document.getElementById('bass-type').value;
                            const electricOptions = document.getElementById('electric-options');
                            const uprightOptions = document.getElementById('upright-options');
                            if (bassType === 'upright') {
                                electricOptions.style.display = 'none';
                                uprightOptions.style.display = 'block';
                            } else {
                                electricOptions.style.display = 'block';
                                uprightOptions.style.display = 'none';
                            }
                        }
                    </script>
                    
                    <!-- Guitares √âlectriques -->
                    <div class="instrument-card" id="card-guitar-electric">
                        <div class="instrument-header">
                            <input type="checkbox" id="has-guitar-electric" onchange="toggleInstrument('guitar-electric')">
                            <label for="has-guitar-electric">üé∏ Guitare(s) √âlectrique</label>
                        </div>
                        <div id="config-guitar-electric" style="display: none;">
                            <div class="quantity-selector">
                                <label>Nombre :</label>
                                <input type="number" id="guitar-electric-count" min="1" max="5" value="1">
                            </div>
                        </div>
                    </div>

                    <!-- Guitares Acoustiques -->
                    <div class="instrument-card" id="card-guitar-acoustic">
                        <div class="instrument-header">
                            <input type="checkbox" id="has-guitar-acoustic" onchange="toggleInstrument('guitar-acoustic')">
                            <label for="has-guitar-acoustic">üé∏ Guitare(s) Acoustique</label>
                        </div>
                        <div id="config-guitar-acoustic" style="display: none;">
                            <div class="quantity-selector">
                                <label>Nombre :</label>
                                <input type="number" id="guitar-acoustic-count" min="1" max="5" value="1">
                            </div>
                            <select id="guitar-acoustic-type" style="width: 100%; margin-top: 10px;">
                                <option value="electro-acoustic">√âlectro-acoustique (DI)</option>
                                <option value="acoustic">Acoustique pure (Micro)</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Claviers -->
                    <div class="instrument-card" id="card-keys">
                        <div class="instrument-header">
                            <input type="checkbox" id="has-keys" onchange="toggleInstrument('keys')">
                            <label for="has-keys">üéπ Clavier/Piano</label>
                        </div>
                        <div id="config-keys" style="display: none;">
                            <div class="quantity-selector">
                                <label>Nombre :</label>
                                <input type="number" id="keys-count" min="1" max="3" value="1">
                            </div>
                            <select id="keys-type" style="width: 100%; margin-top: 10px;">
                                <option value="piano">Piano num√©rique</option>
                                <option value="acoustic-piano">Piano acoustique</option>
                                <option value="synth">Synth√©tiseur</option>
                                <option value="organ">Orgue</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Cuivres -->
                    <div class="instrument-card" id="card-brass">
                        <div class="instrument-header">
                            <input type="checkbox" id="has-brass" onchange="toggleInstrument('brass')">
                            <label for="has-brass">üé∫ Cuivres / Bois</label>
                        </div>
                        <div id="config-brass" style="display: none;">
                            <div style="margin-top: 10px;">
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="brass-sax" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="brass-sax" style="flex: 1; margin: 0;">Saxophone</label>
                                    <input type="number" id="brass-sax-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="brass-trumpet" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="brass-trumpet" style="flex: 1; margin: 0;">Trompette</label>
                                    <input type="number" id="brass-trumpet-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="brass-trombone" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="brass-trombone" style="flex: 1; margin: 0;">Trombone</label>
                                    <input type="number" id="brass-trombone-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="brass-tuba" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="brass-tuba" style="flex: 1; margin: 0;">Tuba</label>
                                    <input type="number" id="brass-tuba-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="brass-horn" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="brass-horn" style="flex: 1; margin: 0;">Cor</label>
                                    <input type="number" id="brass-horn-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="brass-clarinet" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="brass-clarinet" style="flex: 1; margin: 0;">Clarinette</label>
                                    <input type="number" id="brass-clarinet-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="brass-oboe" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="brass-oboe" style="flex: 1; margin: 0;">Hautbois</label>
                                    <input type="number" id="brass-oboe-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="brass-flute" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="brass-flute" style="flex: 1; margin: 0;">Fl√ªte</label>
                                    <input type="number" id="brass-flute-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Cordes -->
                    <div class="instrument-card" id="card-strings">
                        <div class="instrument-header">
                            <input type="checkbox" id="has-strings" onchange="toggleInstrument('strings')">
                            <label for="has-strings">üéª Cordes</label>
                        </div>
                        <div id="config-strings" style="display: none;">
                            <div style="margin-top: 10px;">
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="strings-violin" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="strings-violin" style="flex: 1; margin: 0;">Violon</label>
                                    <input type="number" id="strings-violin-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="strings-viola" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="strings-viola" style="flex: 1; margin: 0;">Alto</label>
                                    <input type="number" id="strings-viola-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="strings-cello" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="strings-cello" style="flex: 1; margin: 0;">Violoncelle</label>
                                    <input type="number" id="strings-cello-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="strings-harp" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="strings-harp" style="flex: 1; margin: 0;">Harpe</label>
                                    <input type="number" id="strings-harp-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="strings-ukulele" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="strings-ukulele" style="flex: 1; margin: 0;">Ukul√©l√©</label>
                                    <input type="number" id="strings-ukulele-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="strings-mandolin" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="strings-mandolin" style="flex: 1; margin: 0;">Mandoline</label>
                                    <input type="number" id="strings-mandolin-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="strings-banjo" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="strings-banjo" style="flex: 1; margin: 0;">Banjo</label>
                                    <input type="number" id="strings-banjo-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="strings-bouzouki" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="strings-bouzouki" style="flex: 1; margin: 0;">Bouzouki</label>
                                    <input type="number" id="strings-bouzouki-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Percussions -->
                    <div class="instrument-card" id="card-percussions">
                        <div class="instrument-header">
                            <input type="checkbox" id="has-percussions" onchange="toggleInstrument('percussions')">
                            <label for="has-percussions">ü™ò Percussions</label>
                        </div>
                        <div id="config-percussions" style="display: none;">
                            <div style="margin-top: 10px;">
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="perc-congas" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="perc-congas" style="flex: 1; margin: 0;">Congas</label>
                                    <input type="number" id="perc-congas-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="perc-bongos" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="perc-bongos" style="flex: 1; margin: 0;">Bongos</label>
                                    <input type="number" id="perc-bongos-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                                <div style="margin-bottom: 8px; padding: 10px; background: #f8f9fa; border-radius: 5px;">
                                    <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                        <input type="checkbox" id="perc-cajon" style="width: 18px; height: 18px; margin-right: 8px;">
                                        <label for="perc-cajon" style="flex: 1; margin: 0; font-weight: 500;">Caj√≥n</label>
                                        <input type="number" id="perc-cajon-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                    </div>
                                    <select id="perc-cajon-technique" style="width: 100%; padding: 6px; margin-left: 26px; font-size: 0.9em;">
                                        <option value="technique1">1 micro: Beta 91A int√©rieur</option>
                                        <option value="technique2">2 micros: Beta 91A int√©rieur + SM57 frappe</option>
                                        <option value="technique3" selected>3 micros: Beta 52 event + Beta 91A int√©rieur + SM57 frappe</option>
                                    </select>
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="perc-djembe" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="perc-djembe" style="flex: 1; margin: 0;">Djemb√©</label>
                                    <input type="number" id="perc-djembe-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="perc-derbouka" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="perc-derbouka" style="flex: 1; margin: 0;">Derbouka</label>
                                    <input type="number" id="perc-derbouka-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="perc-timbales" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="perc-timbales" style="flex: 1; margin: 0;">Timbales</label>
                                    <input type="number" id="perc-timbales-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="perc-xylophone" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="perc-xylophone" style="flex: 1; margin: 0;">Xylophone</label>
                                    <input type="number" id="perc-xylophone-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="perc-vibraphone" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="perc-vibraphone" style="flex: 1; margin: 0;">Vibraphone</label>
                                    <input type="number" id="perc-vibraphone-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="perc-marimba" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <label for="perc-marimba" style="flex: 1; margin: 0;">Marimba</label>
                                    <input type="number" id="perc-marimba-count" min="1" max="4" value="1" style="width: 50px; padding: 4px;">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Voix Lead -->
                    <div class="instrument-card" id="card-vocals">
                        <div class="instrument-header">
                            <input type="checkbox" id="has-vocals" onchange="toggleInstrument('vocals')">
                            <label for="has-vocals">üé§ Voix Lead</label>
                        </div>
                        <div id="config-vocals" style="display: none;">
                            <div class="quantity-selector">
                                <label>Nombre :</label>
                                <input type="number" id="vocals-count" min="1" max="3" value="1">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Ch≈ìurs -->
                    <div class="instrument-card" id="card-backing">
                        <div class="instrument-header">
                            <input type="checkbox" id="has-backing" onchange="toggleInstrument('backing')">
                            <label for="has-backing">üé§ Ch≈ìurs</label>
                        </div>
                        <div id="config-backing" style="display: none;">
                            <div class="quantity-selector">
                                <label>Nombre :</label>
                                <input type="number" id="backing-count" min="1" max="8" value="2">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Chorale -->
                    <div class="instrument-card" id="card-choir">
                        <div class="instrument-header">
                            <input type="checkbox" id="has-choir" onchange="toggleInstrument('choir')">
                            <label for="has-choir">üë• Ch≈ìur / Chorale</label>
                        </div>
                        <div id="config-choir" style="display: none;">
                            <div style="margin-top: 10px;">
                                <label>Nombre de personnes :</label>
                                <select id="choir-size" style="width: 100%; padding: 8px; margin-top: 5px; margin-bottom: 10px;">
                                    <option value="10">10 personnes (2 micros)</option>
                                    <option value="20">20 personnes (3 micros)</option>
                                    <option value="30">30 personnes (4 micros)</option>
                                    <option value="40">40 personnes (6 micros)</option>
                                    <option value="50">50 personnes (8 micros)</option>
                                    <option value="60">60 personnes (10 micros)</option>
                                </select>
                                <label>Type de microphone :</label>
                                <select id="choir-mic-type" style="width: 100%; padding: 8px; margin-top: 5px;">
                                    <option value="Neumann KM184">Neumann KM184</option>
                                    <option value="AKG C451">AKG C451</option>
                                    <option value="DPA 4011">DPA 4011</option>
                                    <option value="DPA 2015">DPA 2015</option>
                                    <option value="AKG C414">AKG C414</option>
                                    <option value="Shure SM81">Shure SM81</option>
                                    <option value="Rode NT5">Rode NT5</option>
                                    <option value="Schoeps MK4">Schoeps MK4</option>
                                    <option value="Sennheiser E914">Sennheiser E914</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- DJ -->
                    <div class="instrument-card" id="card-dj">
                        <div class="instrument-header">
                            <input type="checkbox" id="has-dj" onchange="toggleInstrument('dj')">
                            <label for="has-dj">üéß DJ</label>
                        </div>
                        <div id="config-dj" style="display: none;">
                            <div style="margin-top: 10px;">
                                <label>Technique de sonorisation :</label>
                                <select id="dj-technique" style="width: 100%; padding: 8px; margin-top: 5px; margin-bottom: 10px;">
                                    <option value="xlr">XLR (St√©r√©o XLR direct)</option>
                                    <option value="jack">Jack (St√©r√©o DI)</option>
                                </select>
                                <label style="display: flex; align-items: center; margin-top: 10px; cursor: pointer;">
                                    <input type="checkbox" id="dj-booth" style="width: 18px; height: 18px; margin-right: 8px;">
                                    <span><strong>DJ BOOTH</strong> - Ajouter 2 canaux suppl√©mentaires</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="buttons">
                    <button class="btn-secondary" onclick="previousQuestion(5)">‚Üê Retour</button>
                    <button class="btn-primary" onclick="nextQuestion(5)">Suivant ‚Üí</button>
                </div>
            </div>
            
            <!-- Question 6: Monitoring individuel -->
            <div class="question-container" data-question="6">
                <div class="question-title">Syst√®me de monitoring</div>
                <div class="question-subtitle">Configurez le monitoring pour chaque musicien</div>
                
                <div class="monitoring-grid" id="monitoringGrid">
                    <!-- Les cartes seront g√©n√©r√©es dynamiquement -->
                </div>

                <div class="side-option">
                    <label>
                        <input type="checkbox" id="has-side">
                        <span><strong>SIDE</strong> - Enceintes de remplissage sc√®ne</span>
                    </label>
                    <div id="side-config" style="display: none; margin-top: 10px; margin-left: 30px;">
                        <label style="display: flex; align-items: center; margin-bottom: 5px;">
                            <input type="radio" name="side-type" value="mono" checked style="margin-right: 8px;">
                            <span>Link Mono</span>
                        </label>
                        <label style="display: flex; align-items: center;">
                            <input type="radio" name="side-type" value="stereo" style="margin-right: 8px;">
                            <span>St√©r√©o</span>
                        </label>
                    </div>
                </div>

                <script>
                    document.getElementById('has-side').addEventListener('change', function() {
                        document.getElementById('side-config').style.display = this.checked ? 'block' : 'none';
                    });
                </script>
                
                <div class="buttons">
                    <button class="btn-secondary" onclick="previousQuestion(6)">‚Üê Retour</button>
                    <button class="btn-primary" onclick="nextQuestion(6)">Suivant ‚Üí</button>
                </div>
            </div>
            
            <!-- Question 7: Configuration Technique -->
            <div class="question-container" data-question="7">
                <div class="question-title">Configuration Technique</div>
                <div class="question-subtitle">Pr√©f√©rences mat√©rielles et configuration</div>
                
                <div class="input-group">
                    <label>Consoles de mixage pr√©f√©r√©es (jusqu'√† 3 alternatives)</label>
                    
                    <div style="margin-bottom: 15px;">
                        <label style="font-size: 0.9em; color: #666; margin-bottom: 5px;">Console pr√©f√©r√©e 1 :</label>
                        <select id="console1">
                            <option value="">-- S√©lectionnez une console --</option>
                            <optgroup label="YAMAHA">
                                <option value="YAMAHA QL5" data-in="32" data-out="16">QL5 (32 in / 16 out)</option>
                                <option value="YAMAHA QL1" data-in="16" data-out="8">QL1 (16 in / 8 out)</option>
                                <option value="YAMAHA CL5" data-in="80" data-out="24">CL5 (72 mono + 8 st√©r√©o / 24 out)</option>
                                <option value="YAMAHA DM3" data-in="17" data-out="8">DM3 (16 + 1 st√©r√©o / 8 out)</option>
                                <option value="YAMAHA DM7" data-in="32" data-out="16">DM7 (32 in / 16 out)</option>
                                <option value="YAMAHA PM3 Rivage" data-in="32" data-out="16">PM3 Rivage (32 in / 16 out)</option>
                                <option value="YAMAHA PM5 Rivage" data-in="48" data-out="24">PM5 Rivage (48 in / 24 out)</option>
                                <option value="YAMAHA MG12" data-in="12" data-out="6">MG12 (12 in / 6 out)</option>
                                <option value="YAMAHA MG16" data-in="16" data-out="6">MG16 (16 in / 6 out)</option>
                            </optgroup>
                            <optgroup label="Behringer">
                                <option value="Behringer X32" data-in="32" data-out="16">X32 (32 in / 16 out)</option>
                                <option value="Behringer WING" data-in="48" data-out="24">WING (48 in / 24 out)</option>
                                <option value="Behringer Xenyx X2442USB" data-in="24" data-out="8">Xenyx X2442USB (24 in / 8 out)</option>
                            </optgroup>
                            <optgroup label="Midas">
                                <option value="Midas M32" data-in="32" data-out="16">M32 (32 in / 16 out)</option>
                                <option value="Midas PRO1" data-in="24" data-out="16">PRO1 (24 in / 16 out)</option>
                                <option value="Midas PRO2" data-in="48" data-out="24">PRO2 (48 in / 24 out)</option>
                                <option value="Midas HD96" data-in="96" data-out="48">HD96 (96 in / 48 out)</option>
                            </optgroup>
                            <optgroup label="Allen & Heath">
                                <option value="Allen & Heath Qu-16 Chrome" data-in="22" data-out="13">Qu-16 Chrome (16 + 6 ligne / 13 out)</option>
                                <option value="Allen & Heath SQ5" data-in="16" data-out="12">SQ5 (16 in / 12 out)</option>
                                <option value="Allen & Heath SQ7" data-in="32" data-out="16">SQ7 (32 in / 16 out)</option>
                                <option value="Allen & Heath Avantis" data-in="42" data-out="24">Avantis (42 in / 24 out)</option>
                                <option value="Allen & Heath dLive S5000" data-in="128" data-out="64">dLive S5000 (128 in / 64 out)</option>
                            </optgroup>
                            <optgroup label="DiGiCo">
                                <option value="DiGiCo SD9" data-in="48" data-out="24">SD9 (48 in / 24 out)</option>
                                <option value="DiGiCo SD10" data-in="96" data-out="48">SD10 (96 in / 48 out)</option>
                                <option value="DiGiCo SD12" data-in="72" data-out="36">SD12 (72 in / 36 out)</option>
                                <option value="DiGiCo SD5" data-in="128" data-out="64">SD5 (128 in / 64 out)</option>
                                <option value="DiGiCo Quantum 225" data-in="72" data-out="36">Quantum 225 (72 in / 36 out)</option>
                                <option value="DiGiCo Quantum 338" data-in="128" data-out="64">Quantum 338 (128 in / 64 out)</option>
                            </optgroup>
                            <optgroup label="Waves">
                                <option value="Waves eMotion LV1" data-in="64" data-out="32">eMotion LV1 (64 in / 32 out)</option>
                            </optgroup>
                            <optgroup label="Soundcraft">
                                <option value="Soundcraft Ui24R" data-in="22" data-out="10">Ui24R (20 + 2 ligne / 10 out)</option>
                                <option value="Soundcraft Vi1" data-in="48" data-out="24">Vi1 (48 in / 24 out)</option>
                                <option value="Soundcraft Vi2" data-in="64" data-out="32">Vi2 (64 in / 32 out)</option>
                                <option value="Soundcraft Vi4" data-in="96" data-out="48">Vi4 (96 in / 48 out)</option>
                                <option value="Soundcraft Vi6" data-in="128" data-out="64">Vi6 (128 in / 64 out)</option>
                            </optgroup>
                        </select>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <label style="font-size: 0.9em; color: #666; margin-bottom: 5px;">Console pr√©f√©r√©e 2 (optionnel) :</label>
                        <select id="console2">
                            <option value="">-- S√©lectionnez une console --</option>
                            <optgroup label="YAMAHA">
                                <option value="YAMAHA QL5" data-in="32" data-out="16">QL5 (32 in / 16 out)</option>
                                <option value="YAMAHA QL1" data-in="16" data-out="8">QL1 (16 in / 8 out)</option>
                                <option value="YAMAHA CL5" data-in="80" data-out="24">CL5 (72 mono + 8 st√©r√©o / 24 out)</option>
                                <option value="YAMAHA DM3" data-in="17" data-out="8">DM3 (16 + 1 st√©r√©o / 8 out)</option>
                                <option value="YAMAHA DM7" data-in="32" data-out="16">DM7 (32 in / 16 out)</option>
                                <option value="YAMAHA PM3 Rivage" data-in="32" data-out="16">PM3 Rivage (32 in / 16 out)</option>
                                <option value="YAMAHA PM5 Rivage" data-in="48" data-out="24">PM5 Rivage (48 in / 24 out)</option>
                                <option value="YAMAHA MG12" data-in="12" data-out="6">MG12 (12 in / 6 out)</option>
                                <option value="YAMAHA MG16" data-in="16" data-out="6">MG16 (16 in / 6 out)</option>
                            </optgroup>
                            <optgroup label="Behringer">
                                <option value="Behringer X32" data-in="32" data-out="16">X32 (32 in / 16 out)</option>
                                <option value="Behringer WING" data-in="48" data-out="24">WING (48 in / 24 out)</option>
                                <option value="Behringer Xenyx X2442USB" data-in="24" data-out="8">Xenyx X2442USB (24 in / 8 out)</option>
                            </optgroup>
                            <optgroup label="Midas">
                                <option value="Midas M32" data-in="32" data-out="16">M32 (32 in / 16 out)</option>
                                <option value="Midas PRO1" data-in="24" data-out="16">PRO1 (24 in / 16 out)</option>
                                <option value="Midas PRO2" data-in="48" data-out="24">PRO2 (48 in / 24 out)</option>
                                <option value="Midas HD96" data-in="96" data-out="48">HD96 (96 in / 48 out)</option>
                            </optgroup>
                            <optgroup label="Allen & Heath">
                                <option value="Allen & Heath Qu-16 Chrome" data-in="22" data-out="13">Qu-16 Chrome (16 + 6 ligne / 13 out)</option>
                                <option value="Allen & Heath SQ5" data-in="16" data-out="12">SQ5 (16 in / 12 out)</option>
                                <option value="Allen & Heath SQ7" data-in="32" data-out="16">SQ7 (32 in / 16 out)</option>
                                <option value="Allen & Heath Avantis" data-in="42" data-out="24">Avantis (42 in / 24 out)</option>
                                <option value="Allen & Heath dLive S5000" data-in="128" data-out="64">dLive S5000 (128 in / 64 out)</option>
                            </optgroup>
                            <optgroup label="DiGiCo">
                                <option value="DiGiCo SD9" data-in="48" data-out="24">SD9 (48 in / 24 out)</option>
                                <option value="DiGiCo SD10" data-in="96" data-out="48">SD10 (96 in / 48 out)</option>
                                <option value="DiGiCo SD12" data-in="72" data-out="36">SD12 (72 in / 36 out)</option>
                                <option value="DiGiCo SD5" data-in="128" data-out="64">SD5 (128 in / 64 out)</option>
                                <option value="DiGiCo Quantum 225" data-in="72" data-out="36">Quantum 225 (72 in / 36 out)</option>
                                <option value="DiGiCo Quantum 338" data-in="128" data-out="64">Quantum 338 (128 in / 64 out)</option>
                            </optgroup>
                            <optgroup label="Waves">
                                <option value="Waves eMotion LV1" data-in="64" data-out="32">eMotion LV1 (64 in / 32 out)</option>
                            </optgroup>
                            <optgroup label="Soundcraft">
                                <option value="Soundcraft Ui24R" data-in="22" data-out="10">Ui24R (20 + 2 ligne / 10 out)</option>
                                <option value="Soundcraft Vi1" data-in="48" data-out="24">Vi1 (48 in / 24 out)</option>
                                <option value="Soundcraft Vi2" data-in="64" data-out="32">Vi2 (64 in / 32 out)</option>
                                <option value="Soundcraft Vi4" data-in="96" data-out="48">Vi4 (96 in / 48 out)</option>
                                <option value="Soundcraft Vi6" data-in="128" data-out="64">Vi6 (128 in / 64 out)</option>
                            </optgroup>
                        </select>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <label style="font-size: 0.9em; color: #666; margin-bottom: 5px;">Console pr√©f√©r√©e 3 (optionnel) :</label>
                        <select id="console3">
                            <option value="">-- S√©lectionnez une console --</option>
                            <optgroup label="YAMAHA">
                                <option value="YAMAHA QL5" data-in="32" data-out="16">QL5 (32 in / 16 out)</option>
                                <option value="YAMAHA QL1" data-in="16" data-out="8">QL1 (16 in / 8 out)</option>
                                <option value="YAMAHA CL5" data-in="80" data-out="24">CL5 (72 mono + 8 st√©r√©o / 24 out)</option>
                                <option value="YAMAHA DM3" data-in="17" data-out="8">DM3 (16 + 1 st√©r√©o / 8 out)</option>
                                <option value="YAMAHA DM7" data-in="32" data-out="16">DM7 (32 in / 16 out)</option>
                                <option value="YAMAHA PM3 Rivage" data-in="32" data-out="16">PM3 Rivage (32 in / 16 out)</option>
                                <option value="YAMAHA PM5 Rivage" data-in="48" data-out="24">PM5 Rivage (48 in / 24 out)</option>
                                <option value="YAMAHA MG12" data-in="12" data-out="6">MG12 (12 in / 6 out)</option>
                                <option value="YAMAHA MG16" data-in="16" data-out="6">MG16 (16 in / 6 out)</option>
                            </optgroup>
                            <optgroup label="Behringer">
                                <option value="Behringer X32" data-in="32" data-out="16">X32 (32 in / 16 out)</option>
                                <option value="Behringer WING" data-in="48" data-out="24">WING (48 in / 24 out)</option>
                                <option value="Behringer Xenyx X2442USB" data-in="24" data-out="8">Xenyx X2442USB (24 in / 8 out)</option>
                            </optgroup>
                            <optgroup label="Midas">
                                <option value="Midas M32" data-in="32" data-out="16">M32 (32 in / 16 out)</option>
                                <option value="Midas PRO1" data-in="24" data-out="16">PRO1 (24 in / 16 out)</option>
                                <option value="Midas PRO2" data-in="48" data-out="24">PRO2 (48 in / 24 out)</option>
                                <option value="Midas HD96" data-in="96" data-out="48">HD96 (96 in / 48 out)</option>
                            </optgroup>
                            <optgroup label="Allen & Heath">
                                <option value="Allen & Heath Qu-16 Chrome" data-in="22" data-out="13">Qu-16 Chrome (16 + 6 ligne / 13 out)</option>
                                <option value="Allen & Heath SQ5" data-in="16" data-out="12">SQ5 (16 in / 12 out)</option>
                                <option value="Allen & Heath SQ7" data-in="32" data-out="16">SQ7 (32 in / 16 out)</option>
                                <option value="Allen & Heath Avantis" data-in="42" data-out="24">Avantis (42 in / 24 out)</option>
                                <option value="Allen & Heath dLive S5000" data-in="128" data-out="64">dLive S5000 (128 in / 64 out)</option>
                            </optgroup>
                            <optgroup label="DiGiCo">
                                <option value="DiGiCo SD9" data-in="48" data-out="24">SD9 (48 in / 24 out)</option>
                                <option value="DiGiCo SD10" data-in="96" data-out="48">SD10 (96 in / 48 out)</option>
                                <option value="DiGiCo SD12" data-in="72" data-out="36">SD12 (72 in / 36 out)</option>
                                <option value="DiGiCo SD5" data-in="128" data-out="64">SD5 (128 in / 64 out)</option>
                                <option value="DiGiCo Quantum 225" data-in="72" data-out="36">Quantum 225 (72 in / 36 out)</option>
                                <option value="DiGiCo Quantum 338" data-in="128" data-out="64">Quantum 338 (128 in / 64 out)</option>
                            </optgroup>
                            <optgroup label="Waves">
                                <option value="Waves eMotion LV1" data-in="64" data-out="32">eMotion LV1 (64 in / 32 out)</option>
                            </optgroup>
                            <optgroup label="Soundcraft">
                                <option value="Soundcraft Ui24R" data-in="22" data-out="10">Ui24R (20 + 2 ligne / 10 out)</option>
                                <option value="Soundcraft Vi1" data-in="48" data-out="24">Vi1 (48 in / 24 out)</option>
                                <option value="Soundcraft Vi2" data-in="64" data-out="32">Vi2 (64 in / 32 out)</option>
                                <option value="Soundcraft Vi4" data-in="96" data-out="48">Vi4 (96 in / 48 out)</option>
                                <option value="Soundcraft Vi6" data-in="128" data-out="64">Vi6 (128 in / 64 out)</option>
                            </optgroup>
                        </select>
                    </div>
                    
                    <div id="consoleCapacityAlert" style="margin-top: 10px;"></div>
                </div>
                
                <div class="input-group">
                    <label>Effets souhait√©s (s√©lectionnez jusqu'√† 4)</label>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 10px;">
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="effect-checkbox" value="Room reverb" style="margin-right: 8px;">
                            Room reverb
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="effect-checkbox" value="Hall reverb" style="margin-right: 8px;">
                            Hall reverb
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="effect-checkbox" value="Plate reverb" style="margin-right: 8px;">
                            Plate reverb
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="effect-checkbox" value="Chamber reverb" style="margin-right: 8px;">
                            Chamber reverb
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="effect-checkbox" value="Spring reverb" style="margin-right: 8px;">
                            Spring reverb
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="effect-checkbox" value="Delay mono" style="margin-right: 8px;">
                            Delay mono
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="effect-checkbox" value="Delay Stereo" style="margin-right: 8px;">
                            Delay Stereo
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="effect-checkbox" value="Chorus" style="margin-right: 8px;">
                            Chorus
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="effect-checkbox" value="Flanger" style="margin-right: 8px;">
                            Flanger
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="effect-checkbox" value="Phaser" style="margin-right: 8px;">
                            Phaser
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="effect-checkbox" value="Pitch" style="margin-right: 8px;">
                            Pitch
                        </label>
                    </div>
                </div>
                
                <div class="input-group">
                    <label>Syst√®me de diffusion fa√ßade (s√©lectionnez jusqu'√† 3 pr√©f√©rences)</label>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 10px;">
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="speaker-checkbox" value="Fohhn" style="margin-right: 8px;">
                            Fohhn
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="speaker-checkbox" value="L-acoustics" style="margin-right: 8px;">
                            L-acoustics
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="speaker-checkbox" value="Adamson" style="margin-right: 8px;">
                            Adamson
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="speaker-checkbox" value="Meyer Sound" style="margin-right: 8px;">
                            Meyer Sound
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="speaker-checkbox" value="d&b audiotechnik" style="margin-right: 8px;">
                            d&b audiotechnik
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="speaker-checkbox" value="dB Technologies" style="margin-right: 8px;">
                            dB Technologies
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="speaker-checkbox" value="RCF" style="margin-right: 8px;">
                            RCF
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="speaker-checkbox" value="Electro-Voice" style="margin-right: 8px;">
                            Electro-Voice
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="speaker-checkbox" value="Martin Audio" style="margin-right: 8px;">
                            Martin Audio
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="speaker-checkbox" value="CODA Audio" style="margin-right: 8px;">
                            CODA Audio
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="speaker-checkbox" value="JBL Professional" style="margin-right: 8px;">
                            JBL Professional
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="speaker-checkbox" value="Nexo" style="margin-right: 8px;">
                            Nexo
                        </label>
                    </div>
                </div>
                
                <div class="input-group">
                    <label>Syst√®mes de retour pr√©f√©r√©s (s√©lectionnez jusqu'√† 3)</label>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 10px;">
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="monitor-checkbox" value="Fohhn XT4" style="margin-right: 8px;">
                            Fohhn XT4
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="monitor-checkbox" value="L-Acoustics X12" style="margin-right: 8px;">
                            L-Acoustics X12
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="monitor-checkbox" value="L-Acoustics X15" style="margin-right: 8px;">
                            L-Acoustics X15
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="monitor-checkbox" value="d&b audiotechnik M4" style="margin-right: 8px;">
                            d&b audiotechnik M4
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="monitor-checkbox" value="d&b audiotechnik M2" style="margin-right: 8px;">
                            d&b audiotechnik M2
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="monitor-checkbox" value="Meyer Sound MJF-212A" style="margin-right: 8px;">
                            Meyer Sound MJF-212A
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="monitor-checkbox" value="Meyer Sound MM-4XP" style="margin-right: 8px;">
                            Meyer Sound MM-4XP
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="monitor-checkbox" value="Nexo PS15" style="margin-right: 8px;">
                            Nexo PS15
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="monitor-checkbox" value="Martin Audio LE1500" style="margin-right: 8px;">
                            Martin Audio LE1500
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="monitor-checkbox" value="EAW MicroWedge MW12" style="margin-right: 8px;">
                            EAW MicroWedge MW12
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="monitor-checkbox" value="JBL VRX915M" style="margin-right: 8px;">
                            JBL VRX915M
                        </label>
                        <label style="display: flex; align-items: center; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="checkbox" class="monitor-checkbox" value="QSC K12.2" style="margin-right: 8px;">
                            QSC K12.2
                        </label>
                    </div>
                </div>
                
                <div class="buttons">
                    <button class="btn-secondary" onclick="previousQuestion(7)">‚Üê Retour</button>
                    <button class="btn-primary" onclick="nextQuestion(7)">Suivant ‚Üí</button>
                </div>
            </div>
            
            <!-- Question 8: Demandes sp√©ciales -->
            <div class="question-container" data-question="8">
                <div class="question-title">Demandes particuli√®res</div>
                <div class="question-subtitle">Informations compl√©mentaires ou demandes sp√©ciales (optionnel)</div>
                <div class="input-group">
                    <textarea id="specialRequests" rows="5" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 10px; font-family: inherit; font-size: 1em;" placeholder="Ex: Nous avons besoin d'un piano acoustique, temps d'installation 1h, etc."></textarea>
                </div>
                <div class="buttons">
                    <button class="btn-secondary" onclick="previousQuestion(8)">‚Üê Retour</button>
                    <button class="btn-success" onclick="generateTechSheet()">‚ú® G√©n√©rer la fiche technique</button>
                </div>
            </div>
            
            <!-- R√©sultat -->
            <div class="result-container" id="resultContainer">
                <div class="success-message">
                    <h2>üéâ Fiche technique g√©n√©r√©e !</h2>
                    <p>Vous pouvez maintenant √©diter les patch lists avant de t√©l√©charger</p>
                </div>
                
                <div class="result-card">
                    <h3>üìã Informations g√©n√©rales</h3>
                    <div id="generalInfo"></div>
                </div>
                
                <div class="result-card" id="technicalCard" style="display: none;">
                    <h3>‚öôÔ∏è Configuration Technique</h3>
                    <div id="technicalInfo"></div>
                </div>
                
                <div class="result-card">
                    <h3>üéöÔ∏è Patch List Face (√âditable)</h3>
                    <div class="help-text">
                        üí° <strong>Astuce :</strong> Glissez-d√©posez les lignes pour r√©organiser l'ordre. Cliquez dans les champs pour modifier les micros, pieds et noms d'instruments.
                    </div>
                    <div class="help-text" style="background: #e8f5e9; border-left-color: #4caf50; margin-top: 10px;">
                        üé® <strong>Choix des couleurs :</strong> Utilisez les couleurs pour am√©liorer la lisibilit√© ! Par exemple : üü† Orange pour la batterie, üîµ Bleu pour les claviers, üü¢ Vert pour les guitares, üü£ Violet pour les voix. Cliquez sur le s√©lecteur de couleur pour chaque canal.
                    </div>
                    <div class="patch-header">
                        <div>CH</div>
                        <div>Instrument</div>
                        <div>Microphone</div>
                        <div>Pied</div>
                        <div>üé®</div>
                        <div></div>
                    </div>
                    <div id="patchTableBody"></div>
                    <button class="add-channel-btn" onclick="addChannel()">‚ûï Ajouter un canal</button>
                </div>

                <div class="result-card">
                    <h3>üîä Patch List Retours (√âditable)</h3>
                    <div class="help-text">
                        üí° <strong>Astuce :</strong> Les retours st√©r√©o utilisent des num√©ros impairs (AUX 1-2, AUX 3-4...) pour faciliter le link sur les consoles. Cliquez dans les champs pour modifier les noms et types de retours. <strong>üñ±Ô∏è Glissez-d√©posez les lignes pour r√©organiser l'ordre !</strong>
                    </div>
                    <div class="returns-table">
                        <div class="returns-table-header">
                            <div>AUX</div>
                            <div>Destination</div>
                            <div>Type</div>
                            <div>üé®</div>
                        </div>
                        <div id="returnsTableBody"></div>
                    </div>
                </div>
                
                <div class="result-card">
                    <h3>üìù Configuration Monitoring</h3>
                    <div id="monitoringInfo"></div>
                </div>
                
                <div class="buttons">
                    <button class="btn-primary" onclick="downloadPDF()">üì• T√©l√©charger PDF</button>
                    <button class="btn-success" onclick="exportExcel()">üìä Exporter Excel</button>
                    <button class="btn-primary" onclick="window.location.href='disposition-scenique.html'">üé≠ Disposition Sc√©nique ‚Üí</button>
                    <button class="btn-secondary" onclick="restart()">üîÑ Nouvelle fiche</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        /**
         * ============================================================================
         * FICHE TECH CREATOR v1.2 Beta
         * ============================================================================
         * 
         * @author    Th√©o Arnissolle
         * @copyright Copyright ¬© 2025 Arnisound Tools. Tous droits r√©serv√©s.
         * @license   Usage personnel et non-commercial uniquement
         * @contact   arnisound.tools@gmail.com
         * 
         * ATTENTION : Ce code est prot√©g√© par le droit d'auteur.
         * Toute utilisation commerciale, modification ou redistribution
         * sans autorisation √©crite est strictement interdite.
         * 
         * Pour obtenir une licence commerciale, contactez l'auteur.
         * ============================================================================
         */

        // Console warning pour dissuader toute tentative de copie
        console.log('%c‚ö†Ô∏è AVERTISSEMENT COPYRIGHT', 
            'color: red; font-size: 20px; font-weight: bold;');
        console.log('%cCe code est prot√©g√© par le droit d\'auteur.', 
            'font-size: 14px;');
        console.log('%c¬© 2025 Arnisound Tools - Tous droits r√©serv√©s', 
            'font-size: 12px;');
        console.log('%cToute utilisation commerciale, modification ou redistribution sans autorisation est interdite.', 
            'font-size: 12px; color: orange;');
        console.log('%cContact: arnisound.tools@gmail.com', 
            'font-size: 12px; color: blue;');

        // Donn√©es du formulaire
        let formData = {
            currentQuestion: 1,
            totalQuestions: 8,
            groupName: '',
            contactName: '',
            contactEmail: '',
            contactPhone: '',
            style: '',
            numMusicians: 4,
            instruments: {},
            musicianMonitoring: [],
            hasSide: false,
            specialRequests: '',
            technical: {
                console: '',
                effects: [],
                speakerSystems: [],
                monitorSystem: ''
            }
        };
        
        // Couleurs pr√©d√©finies disponibles avec noms
        const availableColors = [
            { value: '#ff6b6b', name: 'üî¥', label: 'Rouge' },
            { value: '#ee5a6f', name: 'üå∏', label: 'Rose' },
            { value: '#f39c12', name: 'üü†', label: 'Orange' },
            { value: '#f1c40f', name: 'üü°', label: 'Jaune' },
            { value: '#2ecc71', name: 'üü¢', label: 'Vert' },
            { value: '#1abc9c', name: 'üî∑', label: 'Turquoise' },
            { value: '#3498db', name: 'üîµ', label: 'Bleu' },
            { value: '#9b59b6', name: 'üü£', label: 'Violet' },
            { value: '#95a5a6', name: '‚ö™', label: 'Gris' },
            { value: '#34495e', name: '‚¨õ', label: 'Bleu fonc√©' }
        ];
        
        // Couleurs par d√©faut selon type d'instrument
        const defaultColors = {
            kick: '#f39c12',        // üü† Orange - Batterie
            snare: '#f39c12',       // üü† Orange - Batterie
            toms: '#f39c12',        // üü† Orange - Batterie
            overheads: '#f39c12',   // üü† Orange - Batterie
            hihat: '#f39c12',       // üü† Orange - Batterie
            bass: '#ff6b6b',        // üî¥ Rouge - Basse
            guitar: '#2ecc71',      // üü¢ Vert - Guitares
            acousticGuitar: '#2ecc71', // üü¢ Vert - Guitares
            keys: '#9b59b6',        // üü£ Violet - Claviers
            brass: '#f1c40f',       // üü° Jaune - Cuivres
            strings: '#ee5a6f',     // üå∏ Rose - Cordes
            percussions: '#95a5a6', // ‚ö™ Gris - Percussions
            vocals: '#3498db',      // üîµ Bleu - Voix
            choir: '#1abc9c',       // üü¶ Turquoise - Chorale
            dj: '#e74c3c'           // üî¥ Rouge fonc√© - DJ
        };
        
        let patchList = [];
        let returnsList = [];
        let sortable = null;
        let returnsSortable = null;
        
        // Base de donn√©es des micros par style musical
        const micDatabase = {
            Rock: {
                kickOut: 'Beta 52',
                kickIn: 'Beta 91',
                snareTop: 'SM57',
                snareBottom: 'SM57',
                toms: 'e604',
                overheads: 'SM81',
                hihat: 'SM81',
                bass: 'DI',
                bassAmp: 'Audix D4',
                guitar: 'SM57',
                acousticGuitar: 'KM184',
                electroAcousticGuitar: 'DI',
                vocals: 'SM58',
                backing: 'SM58',
                brass: 'Beta 98',
                strings: 'DPA 4099',
                percussions: 'SM57',
                cajonInt: 'Beta 91A',
                cajonEvent: 'Beta 52',
                cajonFrappe: 'SM57'
            },
            Pop: {
                kickOut: 'Audix D6',
                kickIn: 'Beta 91',
                snareTop: 'i5',
                snareBottom: 'e904',
                toms: 'D2',
                tomsLow: 'D4',
                overheads: 'C414',
                hihat: 'C451',
                bass: 'DI',
                bassAmp: 'Audix D4',
                guitar: 'e609',
                acousticGuitar: 'DPA 4011',
                electroAcousticGuitar: 'DI',
                vocals: 'Beta 58',
                backing: 'SM58',
                brass: 'DPA 4099',
                strings: 'DPA 4099',
                percussions: 'SM57',
                cajonInt: 'Beta 91A',
                cajonEvent: 'Beta 52',
                cajonFrappe: 'SM57'
            },
            Jazz: {
                kickOut: 'DPA 4055',
                kickIn: null,
                snareTop: 'MD 421 KONPAKT',
                snareBottom: null,
                toms: 'MD 421 KONPAKT',
                overheads: 'KM184',
                hihat: 'KM184',
                bass: 'DI + DPA 4099',
                bassAmp: 'RE20',
                guitar: 'e609',
                acousticGuitar: 'C451',
                electroAcousticGuitar: 'DI',
                vocals: 'Neumann KMS 105',
                backing: 'SM58',
                brass: 'DPA 4099',
                strings: 'C451',
                percussions: 'KM184',
                cajonInt: 'Beta 91A',
                cajonEvent: 'DPA 4055',
                cajonFrappe: 'MD 421 KONPAKT'
            },
            Folk: {
                kickOut: 'AKG D112',
                kickIn: null,
                snareTop: 'SM57',
                snareBottom: null,
                toms: 'e604',
                overheads: 'C451',
                hihat: 'C451',
                bass: 'DI',
                bassAmp: 'MD 421',
                guitar: 'SM57',
                acousticGuitar: 'KM184',
                electroAcousticGuitar: 'DI',
                vocals: 'Beta 58',
                backing: 'SM58',
                brass: 'Beta 98',
                strings: 'C414',
                percussions: 'SM57',
                cajonInt: 'Beta 91A',
                cajonEvent: 'AKG D112',
                cajonFrappe: 'SM57'
            },
            Soul: {
                kickOut: 'Audix D6',
                kickIn: 'Beta 91',
                snareTop: 'Beta 57',
                snareBottom: 'e904',
                toms: 'e604',
                overheads: 'C414',
                hihat: 'SM81',
                bass: 'DI',
                bassAmp: 'Audix D4',
                guitar: 'SM57',
                acousticGuitar: 'KM184',
                electroAcousticGuitar: 'DI',
                vocals: 'Beta 58',
                backing: 'SM58',
                brass: 'Beta 98',
                strings: 'KM184',
                percussions: 'SM57',
                cajonInt: 'Beta 91A',
                cajonEvent: 'Audix D6',
                cajonFrappe: 'Beta 57'
            },
            Metal: {
                kickOut: 'Audix D6',
                kickIn: 'Beta 91',
                snareTop: 'SM57',
                snareBottom: 'SM57',
                toms: 'e604',
                overheads: 'SM81',
                hihat: 'SM81',
                bass: 'DI',
                bassAmp: 'Audix D4',
                guitar: 'SM57',
                acousticGuitar: 'KM184',
                electroAcousticGuitar: 'DI',
                vocals: 'Audix OM7',
                backing: 'SM58',
                brass: 'Beta 98',
                strings: 'KM184',
                percussions: 'SM57',
                cajonInt: 'Beta 91A',
                cajonEvent: 'Audix D6',
                cajonFrappe: 'SM57'
            },
            World: {
                kickOut: 'Beta 52',
                kickIn: null,
                snareTop: 'SM57',
                snareBottom: null,
                toms: 'e604',
                overheads: 'C451',
                hihat: 'C451',
                bass: 'DI',
                bassAmp: 'M88',
                guitar: 'KM184',
                acousticGuitar: 'C451',
                electroAcousticGuitar: 'DI',
                vocals: 'Beta 87A',
                backing: 'SM58',
                brass: 'DPA 4099',
                strings: 'DPA 4099',
                percussions: 'KM184',
                cajonInt: 'Beta 91A',
                cajonEvent: 'Beta 52',
                cajonFrappe: 'SM57'
            },
            Electro: {
                kickOut: 'Beta 52',
                kickIn: null,
                snareTop: 'Beta 57',
                snareBottom: null,
                toms: 'e604',
                overheads: 'SM81',
                hihat: 'SM81',
                bass: 'DI',
                bassAmp: 'Audix D6',
                guitar: 'DI',
                acousticGuitar: 'DI',
                electroAcousticGuitar: 'DI',
                vocals: 'SM58',
                backing: 'SM58',
                brass: 'Beta 98',
                strings: 'DI',
                percussions: 'SM57',
                cajonInt: 'Beta 91A',
                cajonEvent: 'Beta 52',
                cajonFrappe: 'Beta 57'
            }
        };

        // Micros par type d'instrument
        const micsByInstrument = {
            kick: ['Beta 52', 'Audix D6', 'AKG D112', 'Beta 91', 'e902', 'D6', 'TG D70', 'DPA 4055', 'M88', 'Shure Nexadyne 2', 'Electrovoice RE20'],
            kickIn: ['Beta 91A', 'Sennheiser e901', 'Beyerdynamic TG D71', 'AKG PCC 160', 'Beta 91'],
            snare: ['SM57', 'i5', 'e904', 'Beta 98', 'Sennheiser MD421 Konpakt', 'Shure Beta 56', 'Shure Beta 57', 'Shure Nexadyne 6', 'Beyerdynamic TG57', 'AKG D40'],
            toms: ['e604', 'e904', 'D2', 'D4', 'SM57', 'Sennheiser MD421 Konpakt', 'Shure Beta 56', 'Shure Beta 57', 'Shure Nexadyne 6', 'AKG D40', 'Beyerdynamic TG57'],
            overheads: ['KM184', 'C451', 'C414', 'SM81', 'C214', 'DPA 4011', 'DPA 2015', 'Sennheiser E914', 'Audix ADX51'],
            hihat: ['SM81', 'KM184', 'C451', 'e904', 'DPA 4011', 'DPA 2015', 'Sennheiser E914', 'Audix ADX51'],
            bass: ['DPA 4099', 'DI', 'XLR Direct', 'Audix D6', 'AKG D112', 'Beta 52', 'e602', 'Audix D4', 'Beyerdynamic M88', 'Electrovoice RE20', 'MD 421'],
            guitar: ['SM57', 'XLR Direct', 'e609', 'e906', 'MD421', 'Royer R-121', 'Shure Nexadyne 5'],
            acousticGuitar: ['DI', 'KM184', 'C451', 'C414', 'SM81', 'DPA 4099', 'DPA 4011', 'DPA 2015', 'AKG C411'],
            keys: ['DI', 'XLR Direct', 'KM184', 'C451', 'SM81', 'C414', 'DPA 4011', 'DPA 4099', 'DPA 2015', 'BETA 91'],
            brass: ['Beta 98', 'DPA 4099', 'SM57', 'SM58', 'e609', 'Sennheiser e835'],
            strings: ['DPA 4099', 'KM184', 'C451', 'C414', 'AKG C214', 'AKG C411', 'DI'],
            percussions: ['SM57', 'Beta 91A', 'Beta 52', 'Beta 98', 'KM184', 'C451', 'Sennheiser e604', 'DI'],
            vocals: ['SM58', 'Beta 58', 'Beta 87A', 'Neumann KMS 105', 'Audix OM7', 'Shure KSM8', 'Shure KSM9', 'Shure Nexadyne 8', 'DPA 4018V'],
            choir: ['Neumann KM184', 'AKG C451', 'DPA 4011', 'DPA 2015', 'AKG C414', 'Shure SM81', 'Rode NT5', 'Schoeps MK4', 'Sennheiser E914'],
            dj: ['XLR Direct', 'Jack (DI)', 'RCA (DI)']
        };
        
        const availableStands = [
            'Pied droit', 'Petit pied', 'Grand pied', 'Pince', 'Clip', '-', 'DI Box'
        ];
        
        function toggleInstrument(instrument) {
            const checkbox = document.getElementById(`has-${instrument}`);
            const config = document.getElementById(`config-${instrument}`);
            const card = document.getElementById(`card-${instrument}`);
            
            if (checkbox.checked) {
                config.style.display = 'block';
                card.classList.add('selected');
            } else {
                config.style.display = 'none';
                card.classList.remove('selected');
            }
        }

        function generateMonitoringCards() {
            const grid = document.getElementById('monitoringGrid');
            if (!grid) {
                console.error('Monitoring grid not found');
                return;
            }
            
            grid.innerHTML = '';
            
            // S'assurer que numMusicians est d√©fini
            const numMusicians = formData.numMusicians || parseInt(document.getElementById('numMusicians')?.value) || 4;
            
            // Cr√©er une carte pour chaque musicien
            for (let i = 1; i <= numMusicians; i++) {
                const card = document.createElement('div');
                card.className = 'monitoring-card';
                card.innerHTML = `
                    <h4>Musicien ${i}</h4>
                    <div class="monitoring-options">
                        <label class="monitoring-option">
                            <input type="radio" name="monitor-${i}" value="wedge" checked>
                            <span>Wedge (Enceinte de sc√®ne)</span>
                        </label>
                        <label class="monitoring-option">
                            <input type="radio" name="monitor-${i}" value="iem-mono">
                            <span>IEM Mono (In-Ear Monitor)</span>
                        </label>
                        <label class="monitoring-option">
                            <input type="radio" name="monitor-${i}" value="iem-stereo">
                            <span>IEM St√©r√©o (In-Ear Monitor)</span>
                        </label>
                    </div>
                `;
                grid.appendChild(card);
            }
        }
        
        // Navigation entre questions
        // Fonction pour d√©marrer le questionnaire depuis la page d'accueil
        function demarrerQuestionnaire() {
            showQuestion(1);
            updateProgress();
        }
        
        // D√©tection du message de confirmation Brevo
        // Cette fonction surveille l'apparition du message "Votre inscription est confirm√©e"
        function detecterConfirmationBrevo() {
            // Observer les changements dans le DOM pour d√©tecter le message de confirmation
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    // V√©rifier si le texte "Votre inscription est confirm√©e" appara√Æt
                    const bodyText = document.body.innerText || document.body.textContent;
                    if (bodyText.includes("Votre inscription est confirm√©e") || 
                        bodyText.includes("Votre inscription est confirm√©e.") ||
                        bodyText.includes("inscription est confirm√©e")) {
                        
                        // Afficher le bouton d√©marrer avec une animation
                        const btnDemarrer = document.getElementById('btnDemarrer');
                        if (btnDemarrer) {
                            btnDemarrer.style.display = 'inline-block';
                            btnDemarrer.style.animation = 'fadeIn 0.5s ease';
                        }
                        
                        // Arr√™ter l'observation une fois le bouton affich√©
                        observer.disconnect();
                    }
                });
            });
            
            // Configuration de l'observer
            observer.observe(document.body, {
                childList: true,
                subtree: true,
                characterData: true
            });
        }
        
        // Lancer la d√©tection au chargement de la page
        document.addEventListener('DOMContentLoaded', function() {
            detecterConfirmationBrevo();
        });
        
        function nextQuestion(current) {
            saveCurrentQuestion(current);

            // Si on arrive √† la question monitoring, g√©n√©rer les cartes
            if (current === 5) {
                generateMonitoringCards();
            }

            showQuestion(current + 1);
            updateProgress();
        }
        
        function previousQuestion(current) {
            showQuestion(current - 1);
            updateProgress();
        }
        
        function showQuestion(num) {
            document.querySelectorAll('.question-container').forEach(q => {
                q.classList.remove('active');
            });
            const questionElement = document.querySelector(`[data-question="${num}"]`);
            if (questionElement) {
                questionElement.classList.add('active');
                formData.currentQuestion = num;
            }
        }
        
        function updateProgress() {
            const progress = (formData.currentQuestion / formData.totalQuestions) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }
        
        function saveCurrentQuestion(num) {
            switch(num) {
                case 1:
                    formData.groupName = document.getElementById('groupName').value;
                    break;
                case 2:
                    formData.contactName = document.getElementById('contactName').value;
                    formData.contactEmail = document.getElementById('contactEmail').value;
                    formData.contactPhone = document.getElementById('contactPhone').value;
                    break;
                case 3:
                    formData.style = document.querySelector('input[name="style"]:checked')?.value || 'Rock';
                    break;
                case 4:
                    formData.numMusicians = parseInt(document.getElementById('numMusicians').value);
                    break;
                case 5:
                    // Sauvegarder la config de tous les instruments
                    formData.instruments = {};
                    
                    if (document.getElementById('has-drums').checked) {
                        formData.instruments.drums = {
                            config: document.getElementById('drums-config').value,
                            numToms: parseInt(document.getElementById('drums-num-toms')?.value) || 1,
                            hihat: document.getElementById('drums-hihat')?.checked || false,
                            kickIn: document.getElementById('drums-kickin')?.checked || false,
                            snareBottom: document.getElementById('drums-snarebottom')?.checked || false,
                            ride: document.getElementById('drums-ride')?.checked || false
                        };
                    }
                    if (document.getElementById('has-bass').checked) {
                        formData.instruments.bass = {
                            type: document.getElementById('bass-type').value,
                            electricMethod: document.getElementById('electric-method')?.value || 'di',
                            uprightMethod: document.getElementById('upright-method')?.value || 'mixed'
                        };
                    }
                    if (document.getElementById('has-guitar-electric').checked) {
                        formData.instruments.guitarElectric = {
                            count: parseInt(document.getElementById('guitar-electric-count').value)
                        };
                    }
                    if (document.getElementById('has-guitar-acoustic').checked) {
                        formData.instruments.guitarAcoustic = {
                            count: parseInt(document.getElementById('guitar-acoustic-count').value),
                            type: document.getElementById('guitar-acoustic-type').value
                        };
                    }
                    if (document.getElementById('has-keys').checked) {
                        formData.instruments.keys = {
                            count: parseInt(document.getElementById('keys-count').value),
                            type: document.getElementById('keys-type').value
                        };
                    }
                    if (document.getElementById('has-brass').checked) {
                        formData.instruments.brass = {
                            types: {
                                sax: {
                                    checked: document.getElementById('brass-sax')?.checked || false,
                                    count: parseInt(document.getElementById('brass-sax-count')?.value || 1)
                                },
                                trumpet: {
                                    checked: document.getElementById('brass-trumpet')?.checked || false,
                                    count: parseInt(document.getElementById('brass-trumpet-count')?.value || 1)
                                },
                                trombone: {
                                    checked: document.getElementById('brass-trombone')?.checked || false,
                                    count: parseInt(document.getElementById('brass-trombone-count')?.value || 1)
                                },
                                tuba: {
                                    checked: document.getElementById('brass-tuba')?.checked || false,
                                    count: parseInt(document.getElementById('brass-tuba-count')?.value || 1)
                                },
                                horn: {
                                    checked: document.getElementById('brass-horn')?.checked || false,
                                    count: parseInt(document.getElementById('brass-horn-count')?.value || 1)
                                },
                                clarinet: {
                                    checked: document.getElementById('brass-clarinet')?.checked || false,
                                    count: parseInt(document.getElementById('brass-clarinet-count')?.value || 1)
                                },
                                oboe: {
                                    checked: document.getElementById('brass-oboe')?.checked || false,
                                    count: parseInt(document.getElementById('brass-oboe-count')?.value || 1)
                                },
                                flute: {
                                    checked: document.getElementById('brass-flute')?.checked || false,
                                    count: parseInt(document.getElementById('brass-flute-count')?.value || 1)
                                }
                            }
                        };
                    }
                    if (document.getElementById('has-strings').checked) {
                        formData.instruments.strings = {
                            types: {
                                violin: {
                                    checked: document.getElementById('strings-violin')?.checked || false,
                                    count: parseInt(document.getElementById('strings-violin-count')?.value || 1)
                                },
                                viola: {
                                    checked: document.getElementById('strings-viola')?.checked || false,
                                    count: parseInt(document.getElementById('strings-viola-count')?.value || 1)
                                },
                                cello: {
                                    checked: document.getElementById('strings-cello')?.checked || false,
                                    count: parseInt(document.getElementById('strings-cello-count')?.value || 1)
                                },
                                harp: {
                                    checked: document.getElementById('strings-harp')?.checked || false,
                                    count: parseInt(document.getElementById('strings-harp-count')?.value || 1)
                                },
                                ukulele: {
                                    checked: document.getElementById('strings-ukulele')?.checked || false,
                                    count: parseInt(document.getElementById('strings-ukulele-count')?.value || 1)
                                },
                                mandolin: {
                                    checked: document.getElementById('strings-mandolin')?.checked || false,
                                    count: parseInt(document.getElementById('strings-mandolin-count')?.value || 1)
                                },
                                banjo: {
                                    checked: document.getElementById('strings-banjo')?.checked || false,
                                    count: parseInt(document.getElementById('strings-banjo-count')?.value || 1)
                                },
                                bouzouki: {
                                    checked: document.getElementById('strings-bouzouki')?.checked || false,
                                    count: parseInt(document.getElementById('strings-bouzouki-count')?.value || 1)
                                }
                            }
                        };
                    }
                    if (document.getElementById('has-percussions').checked) {
                        formData.instruments.percussions = {
                            types: {
                                congas: {
                                    checked: document.getElementById('perc-congas')?.checked || false,
                                    count: parseInt(document.getElementById('perc-congas-count')?.value || 1)
                                },
                                bongos: {
                                    checked: document.getElementById('perc-bongos')?.checked || false,
                                    count: parseInt(document.getElementById('perc-bongos-count')?.value || 1)
                                },
                                cajon: {
                                    checked: document.getElementById('perc-cajon')?.checked || false,
                                    count: parseInt(document.getElementById('perc-cajon-count')?.value || 1),
                                    technique: document.getElementById('perc-cajon-technique')?.value || 'technique4'
                                },
                                djembe: {
                                    checked: document.getElementById('perc-djembe')?.checked || false,
                                    count: parseInt(document.getElementById('perc-djembe-count')?.value || 1)
                                },
                                derbouka: {
                                    checked: document.getElementById('perc-derbouka')?.checked || false,
                                    count: parseInt(document.getElementById('perc-derbouka-count')?.value || 1)
                                },
                                timbales: {
                                    checked: document.getElementById('perc-timbales')?.checked || false,
                                    count: parseInt(document.getElementById('perc-timbales-count')?.value || 1)
                                },
                                xylophone: {
                                    checked: document.getElementById('perc-xylophone')?.checked || false,
                                    count: parseInt(document.getElementById('perc-xylophone-count')?.value || 1)
                                },
                                vibraphone: {
                                    checked: document.getElementById('perc-vibraphone')?.checked || false,
                                    count: parseInt(document.getElementById('perc-vibraphone-count')?.value || 1)
                                },
                                marimba: {
                                    checked: document.getElementById('perc-marimba')?.checked || false,
                                    count: parseInt(document.getElementById('perc-marimba-count')?.value || 1)
                                }
                            }
                        };
                    }
                    if (document.getElementById('has-vocals').checked) {
                        formData.instruments.vocals = {
                            count: parseInt(document.getElementById('vocals-count').value)
                        };
                    }
                    if (document.getElementById('has-backing').checked) {
                        formData.instruments.backing = {
                            count: parseInt(document.getElementById('backing-count').value)
                        };
                    }
                    if (document.getElementById('has-choir').checked) {
                        formData.instruments.choir = {
                            size: parseInt(document.getElementById('choir-size').value),
                            micType: document.getElementById('choir-mic-type').value
                        };
                    }
                    if (document.getElementById('has-dj').checked) {
                        formData.instruments.dj = {
                            technique: document.getElementById('dj-technique').value,
                            booth: document.getElementById('dj-booth').checked
                        };
                    }
                    break;
                case 6:
                    // Sauvegarder le monitoring de chaque musicien
                    formData.musicianMonitoring = [];
                    for (let i = 1; i <= formData.numMusicians; i++) {
                        const selected = document.querySelector(`input[name="monitor-${i}"]:checked`)?.value || 'wedge';
                        formData.musicianMonitoring.push({
                            musician: i,
                            type: selected
                        });
                    }
                    formData.hasSide = document.getElementById('has-side').checked;
                    formData.sideType = document.querySelector('input[name="side-type"]:checked')?.value || 'mono';
                    break;
                case 7:
                    // Sauvegarder la configuration technique
                    const consoleData = [];
                    
                    // R√©cup√©rer les 3 consoles s√©lectionn√©es
                    for (let i = 1; i <= 3; i++) {
                        const consoleSelect = document.getElementById(`console${i}`);
                        if (consoleSelect && consoleSelect.value) {
                            const selectedOption = consoleSelect.options[consoleSelect.selectedIndex];
                            consoleData.push({
                                name: consoleSelect.value,
                                inputs: parseInt(selectedOption.dataset.in) || 0,
                                outputs: parseInt(selectedOption.dataset.out) || 0
                            });
                        }
                    }
                    
                    formData.technical = {
                        consoles: consoleData,
                        effects: Array.from(document.querySelectorAll('.effect-checkbox:checked')).map(cb => cb.value),
                        speakerSystems: Array.from(document.querySelectorAll('.speaker-checkbox:checked')).map(cb => cb.value),
                        monitorSystems: Array.from(document.querySelectorAll('.monitor-checkbox:checked')).map(cb => cb.value)
                    };
                    break;
                case 8:
                    formData.specialRequests = document.getElementById('specialRequests').value;
                    break;
            }
        }
        
        // G√©n√©ration de la fiche technique
        function generateTechSheet() {
            saveCurrentQuestion(8);
            patchList = generatePatchList();
            returnsList = generateReturnsList();
            checkConsoleCapacity();
            displayResults();
            savePatchListToStorage();
            
            document.querySelectorAll('.question-container').forEach(q => q.classList.remove('active'));
            document.getElementById('resultContainer').classList.add('active');
            document.getElementById('progressBar').style.width = '100%';
            
            // Initialiser le drag & drop
            initSortable();
        }
        
        function checkConsoleCapacity() {
            const alertDiv = document.getElementById('consoleCapacityAlert');
            
            // Si l'√©l√©ment n'existe pas (on n'est plus sur la page), ne rien faire
            if (!alertDiv) {
                return;
            }
            
            if (!formData.technical.consoles || formData.technical.consoles.length === 0) {
                return; // Pas de console s√©lectionn√©e
            }
            
            // Utiliser le vrai patch g√©n√©r√© au lieu d'une estimation
            const totalInputs = patchList.length;
            const totalOutputs = returnsList.length + 2; // +2 pour la diffusion (toujours 2 out L/R)
            
            // Se baser uniquement sur la premi√®re console choisie
            const firstConsole = formData.technical.consoles[0];
            
            const inputOverflow = totalInputs > firstConsole.inputs;
            const outputOverflow = totalOutputs > firstConsole.outputs;
            
            if (inputOverflow || outputOverflow) {
                let message = '<strong>‚ö†Ô∏è ATTENTION :</strong> Votre configuration d√©passe les capacit√©s de la console !<br>Console s√©lectionn√©e : <strong>' + firstConsole.name + '</strong><br>';
                
                if (inputOverflow) {
                    message += 'Entr√©es requises: <strong>' + totalInputs + '</strong> | Disponible: <strong>' + firstConsole.inputs + '</strong> (D√©passement: <strong>' + (totalInputs - firstConsole.inputs) + '</strong>)<br>';
                }
                
                if (outputOverflow) {
                    message += 'Sorties requises: <strong>' + totalOutputs + '</strong> (dont 2 pour diffusion) | Disponible: <strong>' + firstConsole.outputs + '</strong> (D√©passement: <strong>' + (totalOutputs - firstConsole.outputs) + '</strong>)';
                }
                
                alertDiv.innerHTML = `
                    <div style="padding: 15px; background: #f8d7da; border-left: 5px solid #dc3545; border-radius: 8px; color: #721c24; margin-top: 10px;">
                        ${message}
                    </div>
                `;
            } else {
                alertDiv.innerHTML = `
                    <div style="padding: 15px; background: #d4edda; border-left: 5px solid #28a745; border-radius: 8px; color: #155724; margin-top: 10px;">
                        <strong>‚úÖ OK :</strong> Configuration compatible avec votre console
                        <br>Console s√©lectionn√©e : <strong>${firstConsole.name}</strong>
                        <br>Entr√©es utilis√©es: <strong>${totalInputs}</strong> / <strong>${firstConsole.inputs}</strong> (Restant: <strong>${firstConsole.inputs - totalInputs}</strong>)
                        <br>Sorties utilis√©es: <strong>${totalOutputs}</strong> (dont 2 pour diffusion) / <strong>${firstConsole.outputs}</strong> (Restant: <strong>${firstConsole.outputs - totalOutputs}</strong>)
                    </div>
                `;
            }
        }
        
        function generatePatchList() {
            const list = [];
            let channel = 1;
            const mics = micDatabase[formData.style] || micDatabase.Rock;
            
            // Batterie
            if (formData.instruments.drums) {
                const config = formData.instruments.drums.config;
                const numToms = formData.instruments.drums.numToms || 1;
                const hihat = formData.instruments.drums.hihat || false;
                const kickIn = formData.instruments.drums.kickIn || false;
                const snareBottom = formData.instruments.drums.snareBottom || false;
                const ride = formData.instruments.drums.ride || false;
                
                if (config === 'electronic') {
                    // Batterie √©lectronique - 2 canaux DI st√©r√©o
                    list.push({
                        channel: channel++,
                        instrument: 'BATTERIE √âLEC L',
                        mic: 'DI',
                        stand: '-',
                        category: 'keys',
                        color: defaultColors.keys
                    });
                    list.push({
                        channel: channel++,
                        instrument: 'BATTERIE √âLEC R',
                        mic: 'DI',
                        stand: '-',
                        category: 'keys',
                        color: defaultColors.keys
                    });
                } else if (config === 'mono') {
                    // Technique Mono - Ordre: Kick, Kick In (opt), Hi-Hat (opt), Overhead, Ride (opt)
                    list.push({
                        channel: channel++,
                        instrument: 'KICK OUT',
                        mic: mics.kickOut,
                        stand: 'Petit pied',
                        category: 'kick',
                        color: defaultColors.kick
                    });
                    
                    if (kickIn) {
                        list.push({
                            channel: channel++,
                            instrument: 'KICK IN',
                            mic: mics.kickIn,
                            stand: '-',
                            category: 'kick',
                            color: defaultColors.kick
                        });
                    }
                    
                    if (hihat) {
                        list.push({
                            channel: channel++,
                            instrument: 'HI-HAT',
                            mic: mics.snareTop,
                            stand: 'Pince',
                            category: 'hihat',
                            color: defaultColors.snare
                        });
                    }
                    
                    list.push({
                        channel: channel++,
                        instrument: 'OVERHEAD',
                        mic: mics.overheads,
                        stand: 'Grand pied',
                        category: 'overheads',
                        color: defaultColors.overheads
                    });
                    
                    if (ride) {
                        list.push({
                            channel: channel++,
                            instrument: 'RIDE',
                            mic: mics.overheads,
                            stand: 'Grand pied',
                            category: 'overheads',
                            color: defaultColors.overheads
                        });
                    }
                } else if (config === 'jazz') {
                    // Technique Jazz - Ordre: Kick, Kick In (opt), Snare, Bottom Snare (opt), Hi-Hat (opt), OH L, OH R, Ride (opt)
                    list.push({
                        channel: channel++,
                        instrument: 'KICK OUT',
                        mic: mics.kickOut,
                        stand: 'Petit pied',
                        category: 'kick',
                        color: defaultColors.kick
                    });
                    
                    if (kickIn) {
                        list.push({
                            channel: channel++,
                            instrument: 'KICK IN',
                            mic: mics.kickIn,
                            stand: '-',
                            category: 'kick',
                            color: defaultColors.kick
                        });
                    }
                    
                    list.push({
                        channel: channel++,
                        instrument: 'SNARE TOP',
                        mic: mics.snareTop,
                        stand: 'Pince',
                        category: 'snare',
                        color: defaultColors.snare
                    });
                    
                    if (snareBottom) {
                        list.push({
                            channel: channel++,
                            instrument: 'SNARE BOTTOM',
                            mic: mics.snareBottom,
                            stand: 'Pince',
                            category: 'snare',
                            color: defaultColors.snare
                        });
                    }
                    
                    if (hihat) {
                        list.push({
                            channel: channel++,
                            instrument: 'HI-HAT',
                            mic: mics.snareTop,
                            stand: 'Pince',
                            category: 'hihat',
                            color: defaultColors.snare
                        });
                    }
                    
                    list.push({
                        channel: channel++,
                        instrument: 'OH L',
                        mic: mics.overheads,
                        stand: 'Grand pied',
                        category: 'overheads',
                        color: defaultColors.overheads
                    });
                    
                    list.push({
                        channel: channel++,
                        instrument: 'OH R',
                        mic: mics.overheads,
                        stand: 'Grand pied',
                        category: 'overheads',
                        color: defaultColors.overheads
                    });
                    
                    if (ride) {
                        list.push({
                            channel: channel++,
                            instrument: 'RIDE',
                            mic: mics.overheads,
                            stand: 'Grand pied',
                            category: 'overheads',
                            color: defaultColors.overheads
                        });
                    }
                } else {
                    // Technique Standard - Ordre: Kick, Kick In (opt), Snare, Bottom Snare (opt), Hi-Hat (opt), OH L, OH R, Ride (opt), Toms
                    list.push({
                        channel: channel++,
                        instrument: 'KICK OUT',
                        mic: mics.kickOut,
                        stand: 'Petit pied',
                        category: 'kick',
                        color: defaultColors.kick
                    });
                    
                    if (kickIn) {
                        list.push({
                            channel: channel++,
                            instrument: 'KICK IN',
                            mic: mics.kickIn,
                            stand: '-',
                            category: 'kick',
                            color: defaultColors.kick
                        });
                    }
                    
                    list.push({
                        channel: channel++,
                        instrument: 'SNARE TOP',
                        mic: mics.snareTop,
                        stand: 'Pince',
                        category: 'snare',
                        color: defaultColors.snare
                    });
                    
                    if (snareBottom) {
                        list.push({
                            channel: channel++,
                            instrument: 'SNARE BOTTOM',
                            mic: mics.snareBottom,
                            stand: 'Pince',
                            category: 'snare',
                            color: defaultColors.snare
                        });
                    }
                    
                    if (hihat) {
                        list.push({
                            channel: channel++,
                            instrument: 'HI-HAT',
                            mic: mics.snareTop,
                            stand: 'Pince',
                            category: 'hihat',
                            color: defaultColors.snare
                        });
                    }
                    
                    list.push({
                        channel: channel++,
                        instrument: 'OH L',
                        mic: mics.overheads,
                        stand: 'Grand pied',
                        category: 'overheads',
                        color: defaultColors.overheads
                    });
                    
                    list.push({
                        channel: channel++,
                        instrument: 'OH R',
                        mic: mics.overheads,
                        stand: 'Grand pied',
                        category: 'overheads',
                        color: defaultColors.overheads
                    });
                    
                    if (ride) {
                        list.push({
                            channel: channel++,
                            instrument: 'RIDE',
                            mic: mics.overheads,
                            stand: 'Grand pied',
                            category: 'overheads',
                            color: defaultColors.overheads
                        });
                    }
                    
                    // Toms (nombre variable) - √† la fin
                    for (let i = 1; i <= numToms; i++) {
                        list.push({
                            channel: channel++,
                            instrument: `TOM ${i}`,
                            mic: mics.toms,
                            stand: 'Pince',
                            category: 'toms',
                            color: defaultColors.toms
                        });
                    }
                    
                    // Floor Tom
                    list.push({
                        channel: channel++,
                        instrument: 'FLOOR TOM',
                        mic: mics.toms,
                        stand: 'Pince',
                        category: 'toms',
                        color: defaultColors.toms
                    });
                }
            }
            
            // Basse
            if (formData.instruments.bass) {
                if (formData.instruments.bass.type === 'upright') {
                    const method = formData.instruments.bass.uprightMethod || 'mixed';
                    
                    if (method === 'mic') {
                        // Micro uniquement
                        list.push({
                            channel: channel++,
                            instrument: 'CONTREBASSE',
                            mic: mics.bass,
                            stand: 'Clip',
                            category: 'bass',
                            color: defaultColors.bass
                        });
                    } else if (method === 'di') {
                        // DI uniquement
                        list.push({
                            channel: channel++,
                            instrument: 'CONTREBASSE',
                            mic: 'DI',
                            stand: '-',
                            category: 'bass',
                            color: defaultColors.bass
                        });
                    } else {
                        // Mixte (DI + Micro) - 2 canaux
                        list.push({
                            channel: channel++,
                            instrument: 'CONTREBASSE DI',
                            mic: 'DI',
                            stand: '-',
                            category: 'bass',
                            color: defaultColors.bass
                        });
                        list.push({
                            channel: channel++,
                            instrument: 'CONTREBASSE MIC',
                            mic: mics.bass,
                            stand: 'Clip',
                            category: 'bass',
                            color: defaultColors.bass
                        });
                    }
                } else {
                    // Basse √©lectrique
                    const electricMethod = formData.instruments.bass.electricMethod || 'di';
                    
                    if (electricMethod === 'di') {
                        // DI uniquement
                        list.push({
                            channel: channel++,
                            instrument: 'BASSE',
                            mic: 'DI',
                            stand: '-',
                            category: 'bass',
                            color: defaultColors.bass
                        });
                    } else if (electricMethod === 'amp') {
                        // Micro ampli uniquement
                        list.push({
                            channel: channel++,
                            instrument: 'BASSE',
                            mic: mics.bassAmp,
                            stand: 'Petit pied',
                            category: 'bass',
                            color: defaultColors.bass
                        });
                    } else {
                        // Mixte (DI + Micro ampli) - 2 canaux
                        list.push({
                            channel: channel++,
                            instrument: 'BASSE DI',
                            mic: 'DI',
                            stand: '-',
                            category: 'bass',
                            color: defaultColors.bass
                        });
                        list.push({
                            channel: channel++,
                            instrument: 'BASSE AMP',
                            mic: mics.bassAmp,
                            stand: 'Petit pied',
                            category: 'bass',
                            color: defaultColors.bass
                        });
                    }
                }
            }
            
            // Guitares √âlectriques
            if (formData.instruments.guitarElectric) {
                const count = formData.instruments.guitarElectric.count || 1;
                
                for (let i = 1; i <= count; i++) {
                    let name = count > 1 ? `GUITARE √âLEC ${i}` : 'GUITARE √âLECTRIQUE';
                    
                    list.push({
                        channel: channel++,
                        instrument: name,
                        mic: mics.guitar,
                        stand: 'Petit pied',
                        category: 'guitar',
                        color: defaultColors.guitar
                    });
                }
            }

            // Guitares Acoustiques
            if (formData.instruments.guitarAcoustic) {
                const count = formData.instruments.guitarAcoustic.count || 1;
                const type = formData.instruments.guitarAcoustic.type;
                
                for (let i = 1; i <= count; i++) {
                    let name = count > 1 ? `GUITARE AC ${i}` : 'GUITARE ACOUSTIQUE';
                    let mic, stand;
                    
                    if (type === 'electro-acoustic') {
                        mic = 'DI';  // DI par d√©faut pour √©lectro-acoustique
                        stand = '-';
                    } else {
                        mic = mics.acousticGuitar;
                        stand = 'Petit pied';
                    }
                    
                    list.push({
                        channel: channel++,
                        instrument: name,
                        mic: mic,
                        stand: stand,
                        category: 'acousticGuitar',
                        color: defaultColors.acousticGuitar
                    });
                }
            }
            
            // Claviers
            if (formData.instruments.keys) {
                const count = formData.instruments.keys.count || 1;
                const type = formData.instruments.keys.type;
                
                for (let i = 1; i <= count; i++) {
                    let prefix = count > 1 ? `${i}` : '';
                    
                    if (type === 'acoustic-piano') {
                        // Piano acoustique - 2 micros
                        list.push({
                            channel: channel++,
                            instrument: prefix ? `PIANO ACOUSTIQUE ${prefix} L` : 'PIANO ACOUSTIQUE L',
                            mic: 'KM184',
                            stand: 'Grand pied',
                            category: 'keys',
                            color: defaultColors.keys
                        });
                        list.push({
                            channel: channel++,
                            instrument: prefix ? `PIANO ACOUSTIQUE ${prefix} R` : 'PIANO ACOUSTIQUE R',
                            mic: 'KM184',
                            stand: 'Grand pied',
                            category: 'keys',
                            color: defaultColors.keys
                        });
                    } else {
                        // Piano num√©rique, synth√©, orgue - DI
                        let name = '';
                        switch(type) {
                            case 'piano':
                                name = 'PIANO';
                                break;
                            case 'synth':
                                name = 'SYNTH√â';
                                break;
                            case 'organ':
                                name = 'ORGUE';
                                break;
                            default:
                                name = 'CLAVIER';
                        }
                        
                        if (prefix) name = `${name} ${prefix}`;
                        
                        list.push({
                            channel: channel++,
                            instrument: `${name} L`,
                            mic: 'DI',
                            stand: '-',
                            category: 'keys',
                            color: defaultColors.keys
                        });
                        list.push({
                            channel: channel++,
                            instrument: `${name} R`,
                            mic: 'DI',
                            stand: '-',
                            category: 'keys',
                            color: defaultColors.keys
                        });
                    }
                }
            }
            
            // Cuivres / Bois
            if (formData.instruments.brass && formData.instruments.brass.types) {
                const types = formData.instruments.brass.types;
                
                // Saxophone
                if (types.sax && types.sax.checked) {
                    const count = types.sax.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let name = count > 1 ? `SAXOPHONE ${i}` : 'SAXOPHONE';
                        list.push({
                            channel: channel++,
                            instrument: name,
                            mic: mics.brass,
                            stand: 'Clip',
                            category: 'brass',
                            color: defaultColors.brass
                        });
                    }
                }
                
                // Trompette
                if (types.trumpet && types.trumpet.checked) {
                    const count = types.trumpet.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let name = count > 1 ? `TROMPETTE ${i}` : 'TROMPETTE';
                        list.push({
                            channel: channel++,
                            instrument: name,
                            mic: mics.brass,
                            stand: 'Clip',
                            category: 'brass',
                            color: defaultColors.brass
                        });
                    }
                }
                
                // Trombone
                if (types.trombone && types.trombone.checked) {
                    const count = types.trombone.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let name = count > 1 ? `TROMBONE ${i}` : 'TROMBONE';
                        list.push({
                            channel: channel++,
                            instrument: name,
                            mic: mics.brass,
                            stand: 'Clip',
                            category: 'brass',
                            color: defaultColors.brass
                        });
                    }
                }
                
                // Tuba
                if (types.tuba && types.tuba.checked) {
                    const count = types.tuba.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let name = count > 1 ? `TUBA ${i}` : 'TUBA';
                        list.push({
                            channel: channel++,
                            instrument: name,
                            mic: 'DPA 4099',
                            stand: 'Clip',
                            category: 'brass',
                            color: defaultColors.brass
                        });
                    }
                }
                
                // Cor
                if (types.horn && types.horn.checked) {
                    const count = types.horn.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let name = count > 1 ? `COR ${i}` : 'COR';
                        list.push({
                            channel: channel++,
                            instrument: name,
                            mic: mics.brass,
                            stand: 'Clip',
                            category: 'brass',
                            color: defaultColors.brass
                        });
                    }
                }
                
                // Clarinette
                if (types.clarinet && types.clarinet.checked) {
                    const count = types.clarinet.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let name = count > 1 ? `CLARINETTE ${i}` : 'CLARINETTE';
                        list.push({
                            channel: channel++,
                            instrument: name,
                            mic: mics.brass,
                            stand: 'Clip',
                            category: 'brass',
                            color: defaultColors.brass
                        });
                    }
                }
                
                // Hautbois
                if (types.oboe && types.oboe.checked) {
                    const count = types.oboe.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let name = count > 1 ? `HAUTBOIS ${i}` : 'HAUTBOIS';
                        list.push({
                            channel: channel++,
                            instrument: name,
                            mic: mics.brass,
                            stand: 'Clip',
                            category: 'brass',
                            color: defaultColors.brass
                        });
                    }
                }
                
                // Fl√ªte
                if (types.flute && types.flute.checked) {
                    const count = types.flute.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let name = count > 1 ? `FL√õTE ${i}` : 'FL√õTE';
                        list.push({
                            channel: channel++,
                            instrument: name,
                            mic: mics.brass,
                            stand: 'Clip',
                            category: 'brass',
                            color: defaultColors.brass
                        });
                    }
                }
            }
            
            // Cordes
            if (formData.instruments.strings && formData.instruments.strings.types) {
                const types = formData.instruments.strings.types;
                
                // Violon
                if (types.violin && types.violin.checked) {
                    const count = types.violin.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let name = count > 1 ? `VIOLON ${i}` : 'VIOLON';
                        list.push({
                            channel: channel++,
                            instrument: name,
                            mic: mics.strings,
                            stand: 'Clip',
                            category: 'strings',
                            color: defaultColors.strings
                        });
                    }
                }
                
                // Alto
                if (types.viola && types.viola.checked) {
                    const count = types.viola.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let name = count > 1 ? `ALTO ${i}` : 'ALTO';
                        list.push({
                            channel: channel++,
                            instrument: name,
                            mic: mics.strings,
                            stand: 'Clip',
                            category: 'strings',
                            color: defaultColors.strings
                        });
                    }
                }
                
                // Violoncelle
                if (types.cello && types.cello.checked) {
                    const count = types.cello.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let name = count > 1 ? `VIOLONCELLE ${i}` : 'VIOLONCELLE';
                        list.push({
                            channel: channel++,
                            instrument: name,
                            mic: mics.strings,
                            stand: 'Clip',
                            category: 'strings',
                            color: defaultColors.strings
                        });
                    }
                }
                
                // Harpe
                if (types.harp && types.harp.checked) {
                    const count = types.harp.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let name = count > 1 ? `HARPE ${i}` : 'HARPE';
                        list.push({
                            channel: channel++,
                            instrument: name,
                            mic: mics.strings,
                            stand: 'Petit pied',
                            category: 'strings',
                            color: defaultColors.strings
                        });
                    }
                }
                
                // Ukul√©l√©
                if (types.ukulele && types.ukulele.checked) {
                    const count = types.ukulele.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let name = count > 1 ? `UKUL√âL√â ${i}` : 'UKUL√âL√â';
                        list.push({
                            channel: channel++,
                            instrument: name,
                            mic: 'DI',
                            stand: '-',
                            category: 'strings',
                            color: defaultColors.strings
                        });
                    }
                }
                
                // Mandoline
                if (types.mandolin && types.mandolin.checked) {
                    const count = types.mandolin.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let name = count > 1 ? `MANDOLINE ${i}` : 'MANDOLINE';
                        list.push({
                            channel: channel++,
                            instrument: name,
                            mic: 'DI',
                            stand: '-',
                            category: 'strings',
                            color: defaultColors.strings
                        });
                    }
                }
                
                // Banjo
                if (types.banjo && types.banjo.checked) {
                    const count = types.banjo.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let name = count > 1 ? `BANJO ${i}` : 'BANJO';
                        list.push({
                            channel: channel++,
                            instrument: name,
                            mic: 'DI',
                            stand: '-',
                            category: 'strings',
                            color: defaultColors.strings
                        });
                    }
                }
                
                // Bouzouki
                if (types.bouzouki && types.bouzouki.checked) {
                    const count = types.bouzouki.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let name = count > 1 ? `BOUZOUKI ${i}` : 'BOUZOUKI';
                        list.push({
                            channel: channel++,
                            instrument: name,
                            mic: 'DI',
                            stand: '-',
                            category: 'strings',
                            color: defaultColors.strings
                        });
                    }
                }
            }
            
            // Percussions
            if (formData.instruments.percussions && formData.instruments.percussions.types) {
                const types = formData.instruments.percussions.types;
                
                // Congas
                if (types.congas && types.congas.checked) {
                    const count = types.congas.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let name = count > 1 ? `CONGAS ${i}` : 'CONGAS';
                        list.push({
                            channel: channel++,
                            instrument: name,
                            mic: mics.percussions,
                            stand: 'Petit pied',
                            category: 'percussions',
                            color: defaultColors.percussions
                        });
                    }
                }
                
                // Bongos
                if (types.bongos && types.bongos.checked) {
                    const count = types.bongos.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let name = count > 1 ? `BONGOS ${i}` : 'BONGOS';
                        list.push({
                            channel: channel++,
                            instrument: name,
                            mic: mics.percussions,
                            stand: 'Petit pied',
                            category: 'percussions',
                            color: defaultColors.percussions
                        });
                    }
                }
                
                // Caj√≥n avec 3 techniques possibles
                if (types.cajon && types.cajon.checked) {
                    const count = types.cajon.count || 1;
                    const technique = types.cajon.technique || 'technique3';
                    
                    for (let i = 1; i <= count; i++) {
                        let prefix = count > 1 ? ` ${i}` : '';
                        
                        switch(technique) {
                            case 'technique1':
                                // Technique 1: 1 micro - Beta 91A int√©rieur
                                list.push({
                                    channel: channel++,
                                    instrument: `CAJ√ìN${prefix} INT`,
                                    mic: 'Beta 91A',
                                    stand: '-',
                                    category: 'percussions',
                                    color: defaultColors.percussions
                                });
                                break;
                            
                            case 'technique2':
                                // Technique 2: 2 micros - Beta 91A int√©rieur + SM57 frappe
                                list.push({
                                    channel: channel++,
                                    instrument: `CAJ√ìN${prefix} INT`,
                                    mic: 'Beta 91A',
                                    stand: '-',
                                    category: 'percussions',
                                    color: defaultColors.percussions
                                });
                                list.push({
                                    channel: channel++,
                                    instrument: `CAJ√ìN${prefix} FRAPPE`,
                                    mic: 'SM57',
                                    stand: 'Petit pied',
                                    category: 'percussions',
                                    color: defaultColors.percussions
                                });
                                break;
                            
                            case 'technique3':
                            default:
                                // Technique 3: 3 micros - Beta 52 event + Beta 91A int√©rieur + SM57 frappe
                                list.push({
                                    channel: channel++,
                                    instrument: `CAJ√ìN${prefix} EVENT`,
                                    mic: 'Beta 52',
                                    stand: 'Petit pied',
                                    category: 'percussions',
                                    color: defaultColors.percussions
                                });
                                list.push({
                                    channel: channel++,
                                    instrument: `CAJ√ìN${prefix} INT`,
                                    mic: 'Beta 91A',
                                    stand: '-',
                                    category: 'percussions',
                                    color: defaultColors.percussions
                                });
                                list.push({
                                    channel: channel++,
                                    instrument: `CAJ√ìN${prefix} FRAPPE`,
                                    mic: 'SM57',
                                    stand: 'Petit pied',
                                    category: 'percussions',
                                    color: defaultColors.percussions
                                });
                                break;
                        }
                    }
                }
                
                // Djemb√©
                if (types.djembe && types.djembe.checked) {
                    const count = types.djembe.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let name = count > 1 ? `DJEMB√â ${i}` : 'DJEMB√â';
                        list.push({
                            channel: channel++,
                            instrument: name,
                            mic: mics.percussions,
                            stand: 'Petit pied',
                            category: 'percussions',
                            color: defaultColors.percussions
                        });
                    }
                }
                
                // Derbouka
                if (types.derbouka && types.derbouka.checked) {
                    const count = types.derbouka.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let name = count > 1 ? `DERBOUKA ${i}` : 'DERBOUKA';
                        list.push({
                            channel: channel++,
                            instrument: name,
                            mic: 'SM57',
                            stand: 'Petit pied',
                            category: 'percussions',
                            color: defaultColors.percussions
                        });
                    }
                }
                
                // Timbales
                if (types.timbales && types.timbales.checked) {
                    const count = types.timbales.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let prefix = count > 1 ? ` SET ${i}` : '';
                        list.push({
                            channel: channel++,
                            instrument: `TIMBALE 1${prefix}`,
                            mic: 'SM57',
                            stand: 'Pince',
                            category: 'percussions',
                            color: defaultColors.percussions
                        });
                        list.push({
                            channel: channel++,
                            instrument: `TIMBALE 2${prefix}`,
                            mic: 'SM57',
                            stand: 'Pince',
                            category: 'percussions',
                            color: defaultColors.percussions
                        });
                    }
                }
                
                // Xylophone
                if (types.xylophone && types.xylophone.checked) {
                    const count = types.xylophone.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let name = count > 1 ? `XYLOPHONE ${i}` : 'XYLOPHONE';
                        list.push({
                            channel: channel++,
                            instrument: name,
                            mic: 'SM57',
                            stand: 'Petit pied',
                            category: 'percussions',
                            color: defaultColors.percussions
                        });
                    }
                }
                
                // Vibraphone
                if (types.vibraphone && types.vibraphone.checked) {
                    const count = types.vibraphone.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let prefix = count > 1 ? ` ${i}` : '';
                        list.push({
                            channel: channel++,
                            instrument: `VIBRAPHONE${prefix} L`,
                            mic: 'DI',
                            stand: '-',
                            category: 'percussions',
                            color: defaultColors.percussions
                        });
                        list.push({
                            channel: channel++,
                            instrument: `VIBRAPHONE${prefix} R`,
                            mic: 'DI',
                            stand: '-',
                            category: 'percussions',
                            color: defaultColors.percussions
                        });
                    }
                }
                
                // Marimba
                if (types.marimba && types.marimba.checked) {
                    const count = types.marimba.count || 1;
                    for (let i = 1; i <= count; i++) {
                        let prefix = count > 1 ? ` ${i}` : '';
                        list.push({
                            channel: channel++,
                            instrument: `MARIMBA${prefix} L`,
                            mic: 'SM57',
                            stand: 'Petit pied',
                            category: 'percussions',
                            color: defaultColors.percussions
                        });
                        list.push({
                            channel: channel++,
                            instrument: `MARIMBA${prefix} R`,
                            mic: 'SM57',
                            stand: 'Petit pied',
                            category: 'percussions',
                            color: defaultColors.percussions
                        });
                    }
                }
            }
            
            // Voix lead
            if (formData.instruments.vocals) {
                const count = formData.instruments.vocals.count || 1;
                for (let i = 1; i <= count; i++) {
                    let name = count > 1 ? `VOIX LEAD ${i}` : 'VOIX LEAD';
                    list.push({
                        channel: channel++,
                        instrument: name,
                        mic: mics.vocals,
                        stand: 'Grand pied',
                        category: 'vocals',
                        color: defaultColors.vocals
                    });
                }
            }
            
            // Ch≈ìurs
            if (formData.instruments.backing) {
                const count = formData.instruments.backing.count || 1;
                for (let i = 1; i <= count; i++) {
                    list.push({
                        channel: channel++,
                        instrument: `CH≈íUR ${i}`,
                        mic: mics.backing,
                        stand: 'Grand pied',
                        category: 'vocals',
                        color: defaultColors.vocals
                    });
                }
            }
            
            // Chorale
            if (formData.instruments.choir) {
                const size = formData.instruments.choir.size;
                const micType = formData.instruments.choir.micType;
                let numMics = 2; // par d√©faut 10 personnes
                
                // Calculer le nombre de micros en fonction de la taille
                if (size === 10) numMics = 2;
                else if (size === 20) numMics = 3;
                else if (size === 30) numMics = 4;
                else if (size === 40) numMics = 6;
                else if (size === 50) numMics = 8;
                else if (size === 60) numMics = 10;
                
                for (let i = 1; i <= numMics; i++) {
                    list.push({
                        channel: channel++,
                        instrument: `CHORALE ${i}`,
                        mic: micType,
                        stand: 'Grand pied',
                        category: 'choir',
                        color: defaultColors.choir
                    });
                }
            }
            
            // DJ
            if (formData.instruments.dj) {
                const technique = formData.instruments.dj.technique || 'xlr';
                const hasBooth = formData.instruments.dj.booth || false;
                
                // DJ Principal - 2 canaux
                if (technique === 'xlr') {
                    list.push({
                        channel: channel++,
                        instrument: 'DJ L',
                        mic: 'XLR Direct',
                        stand: '-',
                        category: 'dj',
                        color: defaultColors.keys
                    });
                    list.push({
                        channel: channel++,
                        instrument: 'DJ R',
                        mic: 'XLR Direct',
                        stand: '-',
                        category: 'dj',
                        color: defaultColors.keys
                    });
                } else {
                    list.push({
                        channel: channel++,
                        instrument: 'DJ L',
                        mic: 'Jack (DI)',
                        stand: '-',
                        category: 'dj',
                        color: defaultColors.keys
                    });
                    list.push({
                        channel: channel++,
                        instrument: 'DJ R',
                        mic: 'Jack (DI)',
                        stand: '-',
                        category: 'dj',
                        color: defaultColors.keys
                    });
                }
                
                // DJ BOOTH - 2 canaux suppl√©mentaires
                if (hasBooth) {
                    list.push({
                        channel: channel++,
                        instrument: 'DJ BOOTH L',
                        mic: 'XLR Direct',
                        stand: '-',
                        category: 'dj',
                        color: defaultColors.keys
                    });
                    list.push({
                        channel: channel++,
                        instrument: 'DJ BOOTH R',
                        mic: 'XLR Direct',
                        stand: '-',
                        category: 'dj',
                        color: defaultColors.keys
                    });
                }
            }
            
            return list;
        }

        function generateReturnsList() {
            const list = [];
            let auxNum = 1;

            // Retours individuels
            formData.musicianMonitoring.forEach((monitor, index) => {
                let type = '';
                let musicianName = `Musicien ${monitor.musician}`;
                let color = availableColors[index % availableColors.length].value;
                
                switch(monitor.type) {
                    case 'wedge':
                        type = 'Wedge';
                        list.push({
                            aux: auxNum++,
                            destination: musicianName,
                            type: type,
                            color: color
                        });
                        break;
                    case 'iem-mono':
                        type = 'IEM Mono';
                        list.push({
                            aux: auxNum++,
                            destination: musicianName,
                            type: type,
                            color: color
                        });
                        break;
                    case 'iem-stereo':
                        type = 'IEM St√©r√©o';
                        // Pour IEM st√©r√©o, utiliser des num√©ros impairs (1-2, 3-4, 5-6, etc.)
                        // Si on est sur un num√©ro pair, passer au suivant
                        if (auxNum % 2 === 0) {
                            auxNum++;
                        }
                        list.push({
                            aux: auxNum,
                            auxPair: auxNum + 1,
                            destination: musicianName,
                            type: type,
                            isStereo: true,
                            color: color
                        });
                        auxNum += 2;
                        break;
                }
            });

            // SIDE si demand√©
            if (formData.hasSide) {
                let color = availableColors[list.length % availableColors.length].value;
                if (formData.sideType === 'stereo') {
                    // SIDE St√©r√©o - utiliser des num√©ros impairs
                    if (auxNum % 2 === 0) {
                        auxNum++;
                    }
                    list.push({
                        aux: auxNum,
                        auxPair: auxNum + 1,
                        destination: 'SIDE Sc√®ne',
                        type: 'St√©r√©o',
                        isStereo: true,
                        color: color
                    });
                    auxNum += 2;
                } else {
                    // SIDE Mono
                    list.push({
                        aux: auxNum++,
                        destination: 'SIDE Sc√®ne',
                        type: 'Link Mono',
                        color: color
                    });
                }
            }

            return list;
        }
        
        function displayResults() {
            // Infos g√©n√©rales
            const generalInfo = document.getElementById('generalInfo');
            generalInfo.innerHTML = `
                <div class="info-row">
                    <span class="info-label">Spectacle :</span>
                    <span class="info-value">${formData.groupName}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Contact technique :</span>
                    <span class="info-value">${formData.contactName}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Email :</span>
                    <span class="info-value">${formData.contactEmail}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">T√©l√©phone :</span>
                    <span class="info-value">${formData.contactPhone}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Style musical :</span>
                    <span class="info-value">${formData.style}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Nombre de musiciens :</span>
                    <span class="info-value">${formData.numMusicians}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Canaux Face :</span>
                    <span class="info-value">${patchList.length}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Circuits Retours :</span>
                    <span class="info-value">${returnsList.length} AUX</span>
                </div>
            `;
            
            // Patch list √©ditable
            renderPatchList();

            // Patch retours
            renderReturnsList();
            
            // Infos techniques
            const technicalCard = document.getElementById('technicalCard');
            const technicalInfoDiv = document.getElementById('technicalInfo');
            
            if (formData.technical && (formData.technical.consoles.length > 0 || formData.technical.effects.length > 0 || formData.technical.speakerSystems.length > 0 || formData.technical.monitorSystems.length > 0)) {
                technicalCard.style.display = 'block';
                
                let techHTML = '<div style="display: grid; gap: 10px;">';
                
                if (formData.technical.consoles && formData.technical.consoles.length > 0) {
                    techHTML += `
                        <div class="info-row">
                            <span class="info-label">Consoles pr√©f√©r√©es :</span>
                            <span class="info-value">${formData.technical.consoles.map(c => c.name).join(', ')}</span>
                        </div>
                    `;
                }
                
                if (formData.technical.effects && formData.technical.effects.length > 0) {
                    techHTML += `
                        <div class="info-row">
                            <span class="info-label">Effets souhait√©s :</span>
                            <span class="info-value">${formData.technical.effects.join(', ')}</span>
                        </div>
                    `;
                }
                
                if (formData.technical.speakerSystems && formData.technical.speakerSystems.length > 0) {
                    techHTML += `
                        <div class="info-row">
                            <span class="info-label">Syst√®mes fa√ßade :</span>
                            <span class="info-value">${formData.technical.speakerSystems.join(', ')}</span>
                        </div>
                    `;
                }
                
                if (formData.technical.monitorSystems && formData.technical.monitorSystems.length > 0) {
                    techHTML += `
                        <div class="info-row">
                            <span class="info-label">Syst√®mes retour :</span>
                            <span class="info-value">${formData.technical.monitorSystems.join(', ')}</span>
                        </div>
                    `;
                }
                
                techHTML += '</div>';
                technicalInfoDiv.innerHTML = techHTML;
            } else {
                technicalCard.style.display = 'none';
            }
            
            // Monitoring d√©taill√©
            const monitoringInfo = document.getElementById('monitoringInfo');
            let monitoringHTML = '<div style="display: grid; gap: 10px;">';
            
            formData.musicianMonitoring.forEach(monitor => {
                let typeLabel = '';
                switch(monitor.type) {
                    case 'wedge': typeLabel = 'üîä Wedge'; break;
                    case 'iem-mono': typeLabel = 'üéß IEM Mono'; break;
                    case 'iem-stereo': typeLabel = 'üéß IEM St√©r√©o'; break;
                }
                monitoringHTML += `
                    <div class="info-row">
                        <span class="info-label">Musicien ${monitor.musician} :</span>
                        <span class="info-value">${typeLabel}</span>
                    </div>
                `;
            });

            if (formData.hasSide) {
                monitoringHTML += `
                    <div class="info-row" style="background: #fff3cd; padding: 10px; border-radius: 8px; margin-top: 10px;">
                        <span class="info-label">üîä SIDE :</span>
                        <span class="info-value">Link Mono - Enceintes de remplissage sc√®ne</span>
                    </div>
                `;
            }
            
            if (formData.specialRequests) {
                monitoringHTML += `
                    <div class="info-row" style="margin-top: 15px;">
                        <span class="info-label">Demandes particuli√®res :</span>
                    </div>
                    <div style="padding: 10px; background: white; border-radius: 8px; margin-top: 8px;">
                        ${formData.specialRequests}
                    </div>
                `;
            }
            
            monitoringHTML += '</div>';
            monitoringInfo.innerHTML = monitoringHTML;
        }
        
        function renderPatchList() {
            const tbody = document.getElementById('patchTableBody');
            tbody.innerHTML = '';
            
            patchList.forEach((item, index) => {
                const row = document.createElement('div');
                row.className = 'patch-row';
                row.dataset.index = index;
                row.style.borderLeft = `5px solid ${item.color || '#cccccc'}`;
                
                // Obtenir les micros disponibles selon la cat√©gorie de l'instrument
                const availableMics = micsByInstrument[item.category] || Object.values(micsByInstrument).flat();
                
                row.innerHTML = `
                    <div class="channel-number">${item.channel}</div>
                    <input type="text" value="${item.instrument}" onchange="updatePatchItem(${index}, 'instrument', this.value)">
                    <select onchange="updatePatchItem(${index}, 'mic', this.value)">
                        ${availableMics.map(mic => 
                            `<option value="${mic}" ${mic === item.mic ? 'selected' : ''}>${mic}</option>`
                        ).join('')}
                    </select>
                    <select onchange="updatePatchItem(${index}, 'stand', this.value)">
                        ${availableStands.map(stand => 
                            `<option value="${stand}" ${stand === item.stand ? 'selected' : ''}>${stand}</option>`
                        ).join('')}
                    </select>
                    <select class="color-select" onchange="updatePatchItem(${index}, 'color', this.value); this.parentElement.style.borderLeft = '5px solid ' + this.value;">
                        ${availableColors.map(color => 
                            `<option value="${color.value}" ${color.value === item.color ? 'selected' : ''}>${color.name}</option>`
                        ).join('')}
                    </select>
                    <button class="delete-btn" onclick="deleteChannel(${index}); event.stopPropagation();">‚úï</button>
                `;
                
                tbody.appendChild(row);
            });
        }

        function renderReturnsList() {
            const tbody = document.getElementById('returnsTableBody');
            tbody.innerHTML = '';

            const availableReturnTypes = ['Wedge', 'IEM Mono', 'IEM St√©r√©o', 'Link Mono', 'Link St√©r√©o'];

            returnsList.forEach((item, index) => {
                const row = document.createElement('div');
                row.className = 'returns-row';
                row.style.borderLeft = `5px solid ${item.color || '#cccccc'}`;
                
                if (item.isStereo) {
                    // Affichage pour retour st√©r√©o (2 lignes combin√©es)
                    row.innerHTML = `
                        <div style="font-weight: bold; color: #11998e;">AUX ${item.aux}-${item.auxPair}</div>
                        <input type="text" value="${item.destination}" onchange="updateReturnItem(${index}, 'destination', this.value)" 
                               style="padding: 6px; border: 1px solid #e0e0e0; border-radius: 5px; width: 100%;">
                        <select onchange="updateReturnItem(${index}, 'type', this.value)" 
                                style="padding: 6px; border: 1px solid #e0e0e0; border-radius: 5px; font-weight: 500;">
                            ${availableReturnTypes.map(type => 
                                `<option value="${type}" ${type === item.type ? 'selected' : ''}>${type}</option>`
                            ).join('')}
                        </select>
                        <select class="color-select" onchange="updateReturnItem(${index}, 'color', this.value); this.parentElement.style.borderLeft = '5px solid ' + this.value;">
                            ${availableColors.map(color => 
                                `<option value="${color.value}" ${color.value === item.color ? 'selected' : ''}>${color.name}</option>`
                            ).join('')}
                        </select>
                    `;
                } else {
                    row.innerHTML = `
                        <div style="font-weight: bold; color: #11998e;">AUX ${item.aux}</div>
                        <input type="text" value="${item.destination}" onchange="updateReturnItem(${index}, 'destination', this.value)" 
                               style="padding: 6px; border: 1px solid #e0e0e0; border-radius: 5px; width: 100%;">
                        <select onchange="updateReturnItem(${index}, 'type', this.value)" 
                                style="padding: 6px; border: 1px solid #e0e0e0; border-radius: 5px; font-weight: 500;">
                            ${availableReturnTypes.map(type => 
                                `<option value="${type}" ${type === item.type ? 'selected' : ''}>${type}</option>`
                            ).join('')}
                        </select>
                        <select class="color-select" onchange="updateReturnItem(${index}, 'color', this.value); this.parentElement.style.borderLeft = '5px solid ' + this.value;">
                            ${availableColors.map(color => 
                                `<option value="${color.value}" ${color.value === item.color ? 'selected' : ''}>${color.name}</option>`
                            ).join('')}
                        </select>
                    `;
                }
                
                tbody.appendChild(row);
            });
        }

        function updateReturnItem(index, field, value) {
            if (field === 'type') {
                // D√©terminer si le nouveau type est st√©r√©o
                const isNewTypeStereo = (value === 'IEM St√©r√©o' || value === 'Link St√©r√©o');
                const wasTypeStereo = returnsList[index].isStereo || false;
                
                // Si on change de mono vers st√©r√©o ou vice-versa
                if (isNewTypeStereo !== wasTypeStereo) {
                    returnsList[index].type = value;
                    returnsList[index].isStereo = isNewTypeStereo;
                    
                    // Recalculer tous les num√©ros AUX
                    let auxNum = 1;
                    returnsList.forEach((item, i) => {
                        if (item.isStereo) {
                            // Pour st√©r√©o, utiliser des num√©ros impairs
                            if (auxNum % 2 === 0) {
                                auxNum++;
                            }
                            item.aux = auxNum;
                            item.auxPair = auxNum + 1;
                            auxNum += 2;
                        } else {
                            // Pour mono
                            item.aux = auxNum++;
                            delete item.auxPair;
                        }
                    });
                    
                    // Re-render la liste
                    renderReturnsList();
                    initSortable();
                } else {
                    // Juste changer le type sans recalculer
                    returnsList[index].type = value;
                }
            } else {
                returnsList[index][field] = value;
            }
        }
        
        function initSortable() {
            const tbody = document.getElementById('patchTableBody');
            if (sortable) {
                sortable.destroy();
            }
            
            sortable = new Sortable(tbody, {
                animation: 150,
                handle: '.patch-row',
                ghostClass: 'dragging',
                onEnd: function(evt) {
                    // R√©organiser le tableau patchList
                    const item = patchList.splice(evt.oldIndex, 1)[0];
                    patchList.splice(evt.newIndex, 0, item);

                    // Renumeroter les canaux
                    patchList.forEach((item, index) => {
                        item.channel = index + 1;
                    });

                    savePatchListToStorage();
                    renderPatchList();
                    initSortable();
                }
            });
            
            // Drag & Drop pour les retours
            const returnsTbody = document.getElementById('returnsTableBody');
            if (returnsSortable) {
                returnsSortable.destroy();
            }
            
            returnsSortable = new Sortable(returnsTbody, {
                animation: 150,
                handle: '.returns-row',
                ghostClass: 'dragging',
                onEnd: function(evt) {
                    // R√©organiser le tableau returnsList
                    const item = returnsList.splice(evt.oldIndex, 1)[0];
                    returnsList.splice(evt.newIndex, 0, item);
                    
                    // Renumeroter les AUX
                    returnsList.forEach((item, index) => {
                        if (item.isStereo) {
                            item.aux = (index * 2) + 1;
                            item.auxPair = (index * 2) + 2;
                        } else {
                            // Compter combien de retours st√©r√©o il y a avant
                            let stereoBefore = 0;
                            for (let i = 0; i < index; i++) {
                                if (returnsList[i].isStereo) stereoBefore++;
                            }
                            item.aux = index + stereoBefore + 1;
                        }
                    });
                    
                    renderReturnsList();
                    initSortable();
                }
            });
        }
        
        
        // Sauvegarder patchList dans localStorage pour les autres pages
        function savePatchListToStorage() {
            localStorage.setItem('patchList', JSON.stringify(patchList));
        }

        function updatePatchItem(index, field, value) {
            patchList[index][field] = value;
            savePatchListToStorage();
            if (field === 'color') {
                renderPatchList();
                initSortable();
            }
        }
        
        function deleteChannel(index) {
            if (confirm('Supprimer ce canal ?')) {
                patchList.splice(index, 1);
                patchList.forEach((item, i) => {
                    item.channel = i + 1;
                });
                savePatchListToStorage();
                renderPatchList();
                initSortable();
            }
            return false;
        }
        
        function addChannel() {
            const newChannel = {
                channel: patchList.length + 1,
                instrument: 'NOUVEL INSTRUMENT',
                mic: 'SM58',
                stand: 'Pied droit',
                category: 'vocals',
                color: '#2ecc71'
            };
            patchList.push(newChannel);
            savePatchListToStorage();
            renderPatchList();
            initSortable();
        }
        
        function downloadPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Fonction pour cr√©er un en-t√™te avec couleur unie or
            function createHeader(pageNum, totalPages) {
                // En-t√™te couleur unie #dead39 (222, 173, 57)
                doc.setFillColor(222, 173, 57);
                doc.rect(0, 0, 210, 45, 'F');
                
                doc.setTextColor(255, 255, 255);
                doc.setFontSize(38);
                doc.setFont('helvetica', 'bold');
                doc.text(formData.groupName, 105, 20, { align: 'center' });
                doc.setFontSize(18);
                doc.setFont('helvetica', 'normal');
                doc.text('FICHE TECHNIQUE AUDIO', 105, 35, { align: 'center' });
            }
            
            // Compter les micros et pieds
            function countMicsAndStands() {
                const micCount = {};
                const standCount = {};
                
                patchList.forEach(item => {
                    // Compter les micros
                    if (item.mic) {
                        micCount[item.mic] = (micCount[item.mic] || 0) + 1;
                    }
                    // Compter les pieds
                    if (item.stand && item.stand !== '-') {
                        standCount[item.stand] = (standCount[item.stand] || 0) + 1;
                    }
                });
                
                return { micCount, standCount };
            }
            
            // PAGE 1 - Informations g√©n√©rales et configuration
            createHeader(1, 2);
            
            // Infos g√©n√©rales
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(16);
            doc.text('INFORMATIONS G√âN√âRALES', 20, 58);
            
            doc.setFontSize(10);
            let y = 68;
            doc.text(`Contact technique : ${formData.contactName}`, 20, y);
            y += 6;
            doc.text(`Email : ${formData.contactEmail}`, 20, y);
            y += 6;
            doc.text(`T√©l√©phone : ${formData.contactPhone}`, 20, y);
            y += 6;
            doc.text(`Nombre de musiciens : ${formData.numMusicians}`, 20, y);
            
            // Configuration Technique
            if (formData.technical && (formData.technical.consoles.length > 0 || formData.technical.speakerSystems.length > 0)) {
                y += 15;
                doc.setFontSize(16);
                doc.text('CONFIGURATION TECHNIQUE', 20, y);
                
                y += 10;
                doc.setFontSize(10);
                
                if (formData.technical.consoles && formData.technical.consoles.length > 0) {
                    doc.setFont('helvetica', 'bold');
                    doc.text('R√©gie :', 20, y);
                    doc.setFont('helvetica', 'normal');
                    doc.text(`Une console num√©rique et son patch num√©rique ou analogique.`, 20, y + 5);
                    const consolesText = formData.technical.consoles.map(c => c.name).join(', ');
                    doc.text(`Pr√©f√©rences pour ${consolesText}.`, 20, y + 10);
                    y += 20;
                }
                
                if (formData.technical.speakerSystems && formData.technical.speakerSystems.length > 0) {
                    doc.setFont('helvetica', 'bold');
                    doc.text('Diffusion :', 20, y);
                    doc.setFont('helvetica', 'normal');
                    const systemsText = formData.technical.speakerSystems.join(', ');
                    const lines = doc.splitTextToSize(`Un syst√®me de diffusion adapt√© au lieu (Type : ${systemsText}), √©galis√© et en phase, garantissant une couverture et une pression homog√®ne en tout point. Le syst√®me doit √™tre install√© et pr√™t √† fonctionner √† l'arriv√©e du groupe.`, 170);
                    doc.text(lines, 20, y + 5);
                    y += (lines.length * 5) + 10;
                }
                
                if (formData.technical.monitorSystems && formData.technical.monitorSystems.length > 0) {
                    doc.setFont('helvetica', 'bold');
                    doc.text('Retours :', 20, y);
                    doc.setFont('helvetica', 'normal');
                    const monitorsText = formData.technical.monitorSystems.join(', ');
                    doc.text(`Pr√©f√©rences pour ${monitorsText}.`, 20, y + 5);
                    y += 15;
                }
                
                if (formData.technical.effects && formData.technical.effects.length > 0) {
                    doc.setFont('helvetica', 'bold');
                    doc.text('Effets souhait√©s :', 20, y);
                    doc.setFont('helvetica', 'normal');
                    doc.text(formData.technical.effects.join(', '), 20, y + 5);
                    y += 15;
                }
            }
            
            // LISTE QUANTITATIVE DES MICROS ET PIEDS
            const { micCount, standCount } = countMicsAndStands();
            
            y += 10;
            doc.setFontSize(16);
            doc.text('MICROPHONIE ET SUPPORTS', 20, y);
            y += 10;
            
            doc.setFontSize(9);
            for (const [mic, count] of Object.entries(micCount).sort()) {
                if (y > 265) {
                    // Si on d√©passe, on continue sur la m√™me page en r√©duisant l'espace
                    y = 265;
                    break;
                }
                doc.text(`- ${count} ${mic}${count > 1 ? 's' : ''}`, 20, y);
                y += 5;
            }
            
            // Pieds
            y += 5;
            for (const [stand, count] of Object.entries(standCount).sort()) {
                if (y > 270) break;
                doc.text(`- ${count} ${stand}${count > 1 ? 's' : ''}`, 20, y);
                y += 5;
            }
            
            // C√¢bles XLR
            if (y < 270) {
                doc.text(`- ${patchList.length} C√¢bles XLR`, 20, y);
            }
            
            // Demandes sp√©ciales
            if (formData.specialRequests) {
                y += 10;
                if (y < 250) {
                    doc.setFontSize(16);
                    doc.text('DEMANDES PARTICULI√àRES', 20, y);
                    y += 8;
                    doc.setFontSize(9);
                    const lines = doc.splitTextToSize(formData.specialRequests, 170);
                    doc.text(lines, 20, y);
                }
            }
            
            // PAGE 2 - Patch Lists
            doc.addPage();
            createHeader(2, 2);
            
            // Patch List Face
            y = 55;
            doc.setFontSize(14);
            doc.setTextColor(0, 0, 0);
            doc.text('PATCH LIST FACE', 20, y);
            
            y += 8;
            doc.setFontSize(8);
            doc.setGState(new doc.GState({opacity: 0.7}));  // Opacit√© 70%
            doc.setFillColor(0, 0, 0);  // NOIR
            doc.rect(20, y - 5, 170, 7, 'F');
            doc.setGState(new doc.GState({opacity: 1.0}));  // Remettre opacit√© √† 100%
            doc.setTextColor(255, 255, 255);
            doc.text('CH', 25, y);
            doc.text('INSTRUMENT', 40, y);
            doc.text('MICROPHONE', 100, y);
            doc.text('PIED', 150, y);
            
            y += 7;
            doc.setTextColor(0, 0, 0);
            
            patchList.forEach((item, index) => {
                // Fond gris l√©ger pour les lignes paires
                if (index % 2 === 0) {
                    doc.setFillColor(240, 240, 240);
                    doc.rect(20, y - 4, 170, 5, 'F');
                }
                
                // Ajouter liser√©s color√©s devant chaque colonne
                if (item.color) {
                    const hexColor = item.color.replace('#', '');
                    const r = parseInt(hexColor.substr(0, 2), 16);
                    const g = parseInt(hexColor.substr(2, 2), 16);
                    const b = parseInt(hexColor.substr(4, 2), 16);
                    
                    // Liser√© color√© devant CH
                    doc.setFillColor(r, g, b);
                    doc.rect(23, y - 4, 1.5, 5, 'F');
                    
                    // Liser√© color√© devant INSTRUMENT
                    doc.rect(38, y - 4, 1.5, 5, 'F');
                    
                    // Liser√© color√© devant MICROPHONE
                    doc.rect(98, y - 4, 1.5, 5, 'F');
                    
                    // Liser√© color√© devant PIED
                    doc.rect(148, y - 4, 1.5, 5, 'F');
                }
                
                doc.setTextColor(0, 0, 0);
                doc.text(item.channel.toString(), 25, y);
                doc.text(item.instrument.substring(0, 30), 40, y);
                doc.text(item.mic.substring(0, 25), 100, y);
                doc.text(item.stand, 150, y);
                y += 5;
            });

            // Patch Retours
            y += 10;
            doc.setFontSize(14);
            doc.text('PATCH LIST RETOURS', 20, y);

            y += 8;
            doc.setFontSize(8);
            doc.setGState(new doc.GState({opacity: 0.7}));  // Opacit√© 70%
            doc.setFillColor(0, 0, 0);  // NOIR
            doc.rect(20, y - 5, 170, 7, 'F');
            doc.setGState(new doc.GState({opacity: 1.0}));  // Remettre opacit√© √† 100%
            doc.setTextColor(255, 255, 255);
            doc.text('AUX', 25, y);
            doc.text('DESTINATION', 50, y);
            doc.text('TYPE', 130, y);

            y += 7;
            doc.setTextColor(0, 0, 0);

            returnsList.forEach((item, index) => {
                // Fond gris l√©ger pour les lignes paires
                if (index % 2 === 0) {
                    doc.setFillColor(240, 240, 240);
                    doc.rect(20, y - 4, 170, 5, 'F');
                }
                
                // Ajouter liser√©s color√©s devant chaque colonne
                if (item.color) {
                    const hexColor = item.color.replace('#', '');
                    const r = parseInt(hexColor.substr(0, 2), 16);
                    const g = parseInt(hexColor.substr(2, 2), 16);
                    const b = parseInt(hexColor.substr(4, 2), 16);
                    
                    // Liser√© color√© devant AUX
                    doc.setFillColor(r, g, b);
                    doc.rect(23, y - 4, 1.5, 5, 'F');
                    
                    // Liser√© color√© devant DESTINATION
                    doc.rect(48, y - 4, 1.5, 5, 'F');
                    
                    // Liser√© color√© devant TYPE
                    doc.rect(128, y - 4, 1.5, 5, 'F');
                }
                
                doc.setTextColor(0, 0, 0);
                if (item.isStereo) {
                    doc.text(`AUX ${item.aux}-${item.auxPair}`, 25, y);
                } else {
                    doc.text(`AUX ${item.aux}`, 25, y);
                }
                doc.text(item.destination, 50, y);
                doc.text(item.type, 130, y);
                y += 5;
            });
            
            // Footer pour toutes les pages
            const pageCount = doc.internal.getNumberOfPages();
            
            for (let i = 1; i <= pageCount; i++) {
                doc.setPage(i);
                
                // Ligne d√©corative dor√©e (rappel de la vague du logo)
                doc.setDrawColor(193, 154, 62);
                doc.setLineWidth(0.5);
                doc.line(70, 282, 140, 282);
                
                // Texte du footer principal avec version
                doc.setFontSize(8);
                doc.setTextColor(150);
                doc.text(`G√©n√©r√© par FICHE TECH CREATOR v1.2 Beta - ${new Date().toLocaleDateString('fr-FR')}`, 105, 287, { align: 'center' });
                
                // Copyright complet
                doc.setFontSize(7);
                doc.setTextColor(120);
                doc.text('¬© 2025 Arnisound Tools - Tous droits r√©serv√©s - Usage non-commercial uniquement', 105, 291, { align: 'center' });
                
                // Num√©rotation des pages en bas √† droite
                doc.setFontSize(9);
                doc.setTextColor(100);
                doc.text(`${i}/${pageCount}`, 190, 291, { align: 'right' });
            }
            
            // T√©l√©charger
            doc.save(`FicheTech_${formData.groupName.replace(/\s+/g, '_')}.pdf`);
        }
        
        function exportExcel() {
            // Cr√©er le contenu CSV compatible Excel
            let csv = '\ufeff'; // BOM pour UTF-8
            
            // En-t√™te
            csv += `FICHE TECHNIQUE AUDIO - ${formData.groupName}\n\n`;
            
            // Informations g√©n√©rales
            csv += 'INFORMATIONS G√âN√âRALES\n';
            csv += `Groupe/Artiste,${formData.groupName}\n`;
            csv += `Contact technique,${formData.contactName}\n`;
            csv += `Email,${formData.contactEmail}\n`;
            csv += `T√©l√©phone,${formData.contactPhone}\n`;
            csv += `Style musical,${formData.style}\n`;
            csv += `Nombre de musiciens,${formData.numMusicians}\n\n`;
            
            // Configuration Technique
            if (formData.technical && (formData.technical.consoles.length > 0 || formData.technical.speakerSystems.length > 0)) {
                csv += 'CONFIGURATION TECHNIQUE\n';
                
                if (formData.technical.consoles && formData.technical.consoles.length > 0) {
                    const consolesText = formData.technical.consoles.map(c => c.name).join(', ');
                    csv += `Consoles pr√©f√©r√©es,"${consolesText}"\n`;
                }
                
                if (formData.technical.effects && formData.technical.effects.length > 0) {
                    csv += `Effets souhait√©s,"${formData.technical.effects.join(', ')}"\n`;
                }
                
                if (formData.technical.speakerSystems && formData.technical.speakerSystems.length > 0) {
                    csv += `Syst√®mes de diffusion fa√ßade,"${formData.technical.speakerSystems.join(', ')}"\n`;
                }
                
                if (formData.technical.monitorSystems && formData.technical.monitorSystems.length > 0) {
                    csv += `Syst√®mes de retour pr√©f√©r√©s,"${formData.technical.monitorSystems.join(', ')}"\n`;
                }
                
                csv += '\n';
            }
            
            // Patch List Face
            csv += 'PATCH LIST FACE\n';
            csv += 'Canal,Instrument,Microphone,Pied,Couleur\n';
            patchList.forEach(item => {
                const colorName = availableColors.find(c => c.value === item.color)?.label || 'N/A';
                csv += `${item.channel},"${item.instrument}","${item.mic}","${item.stand}",${colorName}\n`;
            });
            
            csv += '\n';
            
            // Patch List Retours
            csv += 'PATCH LIST RETOURS\n';
            csv += 'AUX,Destination,Type,Couleur\n';
            returnsList.forEach(item => {
                const auxText = item.isStereo ? `AUX ${item.aux}-${item.auxPair}` : `AUX ${item.aux}`;
                const colorName = availableColors.find(c => c.value === item.color)?.label || 'N/A';
                csv += `"${auxText}","${item.destination}","${item.type}",${colorName}\n`;
            });
            
            csv += '\n';
            
            // Demandes sp√©ciales
            if (formData.specialRequests) {
                csv += 'DEMANDES PARTICULI√àRES\n';
                csv += `"${formData.specialRequests.replace(/"/g, '""')}"\n`;
            }
            
            csv += '\n';
            csv += `G√©n√©r√© le ${new Date().toLocaleDateString('fr-FR')} par FICHE TECH CREATOR v1.2 Beta\n`;
            csv += '¬© 2025 Arnisound Tools - Tous droits r√©serv√©s\n';
            csv += 'Usage personnel et non-commercial uniquement\n';
            csv += 'Contact: arnisound.tools@gmail.com\n';
            
            // T√©l√©charger le fichier
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `FicheTech_${formData.groupName.replace(/\s+/g, '_')}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        
        function restart() {
            location.reload();
        }
        
        // Initialisation
        updateProgress();
        
        // Gestion des limitations de checkboxes
        document.addEventListener('DOMContentLoaded', function() {
            // Limiter les effets √† 4 maximum
            document.querySelectorAll('.effect-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const checked = document.querySelectorAll('.effect-checkbox:checked');
                    if (checked.length > 4) {
                        this.checked = false;
                        alert('‚ö†Ô∏è Vous ne pouvez s√©lectionner que 4 effets maximum');
                    }
                });
            });
            
            // Limiter les syst√®mes fa√ßade √† 3 maximum
            document.querySelectorAll('.speaker-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const checked = document.querySelectorAll('.speaker-checkbox:checked');
                    if (checked.length > 3) {
                        this.checked = false;
                        alert('‚ö†Ô∏è Vous ne pouvez s√©lectionner que 3 syst√®mes de diffusion maximum');
                    }
                });
            });
            
            // Limiter les syst√®mes de retour √† 3 maximum
            document.querySelectorAll('.monitor-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const checked = document.querySelectorAll('.monitor-checkbox:checked');
                    if (checked.length > 3) {
                        this.checked = false;
                        alert('‚ö†Ô∏è Vous ne pouvez s√©lectionner que 3 syst√®mes de retour maximum');
                    }
                });
            });
            
            // V√©rification instantan√©e de la console pr√©f√©r√©e 1
            const console1Select = document.getElementById('console1');
            if (console1Select) {
                console1Select.addEventListener('change', function() {
                    checkConsoleCapacityRealTime();
                });
            }
        });
        
        function checkConsoleCapacityRealTime() {
            const console1Select = document.getElementById('console1');
            const alertDiv = document.getElementById('consoleCapacityAlert');
            
            if (!console1Select || !alertDiv) {
                return;
            }
            
            if (!console1Select.value) {
                alertDiv.innerHTML = '';
                return;
            }
            
            const selectedOption = console1Select.options[console1Select.selectedIndex];
            const consoleInputs = parseInt(selectedOption.dataset.in) || 0;
            const consoleOutputs = parseInt(selectedOption.dataset.out) || 0;
            
            // Calculer une estimation rapide bas√©e sur la configuration actuelle
            let estimatedInputs = 0;
            
            // Cette estimation se base sur formData.instruments si disponible
            if (formData.instruments) {
                // Batterie
                if (formData.instruments.drums) {
                    const config = formData.instruments.drums.config;
                    const numToms = formData.instruments.drums.numToms || 1;
                    const hihat = formData.instruments.drums.hihat || false;
                    const kickIn = formData.instruments.drums.kickIn || false;
                    const snareBottom = formData.instruments.drums.snareBottom || false;
                    const ride = formData.instruments.drums.ride || false;
                    
                    if (config === 'electronic') {
                        estimatedInputs += 2;
                    } else if (config === 'mono') {
                        estimatedInputs += 2;
                        if (hihat) estimatedInputs += 1;
                        if (kickIn) estimatedInputs += 1;
                        if (ride) estimatedInputs += 1;
                    } else if (config === 'jazz') {
                        estimatedInputs += 4;
                        if (hihat) estimatedInputs += 1;
                        if (kickIn) estimatedInputs += 1;
                        if (snareBottom) estimatedInputs += 1;
                        if (ride) estimatedInputs += 1;
                    } else {
                        estimatedInputs += 5 + numToms;
                        if (hihat) estimatedInputs += 1;
                        if (kickIn) estimatedInputs += 1;
                        if (snareBottom) estimatedInputs += 1;
                        if (ride) estimatedInputs += 1;
                    }
                }
                
                // Estimation simple pour les autres instruments
                if (formData.instruments.bass) estimatedInputs += 1;
                if (formData.instruments.guitarElectric) estimatedInputs += formData.instruments.guitarElectric.count || 1;
                if (formData.instruments.guitarAcoustic) estimatedInputs += formData.instruments.guitarAcoustic.count || 1;
                if (formData.instruments.keys) estimatedInputs += (formData.instruments.keys.count || 1) * 2;
                if (formData.instruments.vocals) estimatedInputs += formData.instruments.vocals.count || 1;
                if (formData.instruments.backing) estimatedInputs += formData.instruments.backing.count || 0;
                if (formData.instruments.dj) estimatedInputs += formData.instruments.dj.booth ? 4 : 2;
                
                // Chorale
                if (formData.instruments.choir) {
                    const size = formData.instruments.choir.size;
                    let numMics = 2;
                    if (size === 10) numMics = 2;
                    else if (size === 20) numMics = 3;
                    else if (size === 30) numMics = 4;
                    else if (size === 40) numMics = 6;
                    else if (size === 50) numMics = 8;
                    else if (size === 60) numMics = 10;
                    estimatedInputs += numMics;
                }
            }
            
            // Afficher le r√©sultat
            if (estimatedInputs > 0) {
                if (estimatedInputs > consoleInputs) {
                    alertDiv.innerHTML = `
                        <div style="padding: 15px; background: #f8d7da; border-left: 5px solid #dc3545; border-radius: 8px; color: #721c24;">
                            <strong>‚ö†Ô∏è ATTENTION :</strong> Configuration estim√©e incompatible !
                            <br>Console s√©lectionn√©e : <strong>${console1Select.value}</strong>
                            <br>Estimation : <strong>~${estimatedInputs} canaux</strong> | Disponible: <strong>${consoleInputs} canaux</strong>
                        </div>
                    `;
                } else {
                    alertDiv.innerHTML = `
                        <div style="padding: 15px; background: #d4edda; border-left: 5px solid #28a745; border-radius: 8px; color: #155724;">
                            <strong>‚úÖ OK :</strong> Configuration estim√©e compatible
                            <br>Console s√©lectionn√©e : <strong>${console1Select.value}</strong>
                            <br>Estimation : <strong>~${estimatedInputs} canaux</strong> | Disponible: <strong>${consoleInputs} canaux</strong>
                        </div>
                    `;
                }
            } else {
                alertDiv.innerHTML = `
                    <div style="padding: 15px; background: #d1ecf1; border-left: 5px solid #0c5460; border-radius: 8px; color: #0c5460;">
                        <strong>‚ÑπÔ∏è INFO :</strong> Console s√©lectionn√©e : <strong>${console1Select.value}</strong>
                        <br>Capacit√©: <strong>${consoleInputs} entr√©es / ${consoleOutputs} sorties</strong>
                    </div>
                `;
            }
        }
    </script>

    <!-- Footer de copyright -->
    <footer style="background: #000000; 
                   color: #666; 
                   text-align: center; 
                   padding: 20px 20px; 
                   font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                   font-size: 0.5em;">
        <div style="max-width: 800px; margin: 0 auto;">
            <p style="margin: 5px 0;">
                <strong>Fiche Tech Creator v1.2 Beta</strong>
            </p>
            <p style="margin: 5px 0;">
                ¬© 2025 Th√©o Arnissolle - Tous droits r√©serv√©s
            </p>
            <p style="margin: 5px 0;">
                <a href="mailto:arnisound.tools@gmail.com" 
                   style="color: #c19a3e; text-decoration: none;">
                    arnisound.tools@gmail.com
                </a>
            </p>
            <p style="margin: 10px 0 5px 0; font-size: 0.85em;">
                Usage personnel et non-commercial uniquement ‚Ä¢ 
                <a href="LICENSE.txt" style="color: #c19a3e; text-decoration: none;">Voir la licence</a>
            </p>
        </div>
    </footer>
</body>
</html>